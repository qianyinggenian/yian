"use strict";(self["webpackChunkyian"]=self["webpackChunkyian"]||[]).push([[363],{82363:function(t,e,n){n.r(e),n.d(e,{default:function(){return c}});var l=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("el-select",{attrs:{placeholder:"请选择"},on:{change:t.handleClear},model:{value:t.typeValue,callback:function(e){t.typeValue=e},expression:"typeValue"}},t._l(t.typeOptions,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),e("div",{staticClass:"textarea-container"},[e("p",[e("span",[t._v(t._s(t.sourceObj[t.typeValue]))])]),e("el-input",{attrs:{type:"textarea",placeholder:"请输入内容"},model:{value:t.initialValue,callback:function(e){t.initialValue=e},expression:"initialValue"}})],1),e("div",{staticClass:"btns-box"},["txt"===t.typeValue?e("el-button",{attrs:{size:"small"},on:{click:t.handleFormatTXTToM3u8}},[t._v("格式转换")]):"m3u8"===t.typeValue?e("el-button",{attrs:{size:"small"},on:{click:t.handleFormatM3u8ToTXT}},[t._v("格式转换")]):"txt转json"===t.typeValue?e("el-button",{attrs:{size:"small"},on:{click:t.handleFormatTxtToJson}},[t._v("格式转换")]):"m3u8转json"===t.typeValue?e("el-button",{attrs:{size:"small"},on:{click:t.handleFormatM3u8ToJson}},[t._v("格式转换")]):t._e(),e("el-button",{attrs:{size:"small"},on:{click:t.handleClear}},[t._v("清空屏幕")]),e("el-button",{attrs:{size:"small"},on:{click:t.handleCopyResult}},[t._v("拷贝结果")]),e("el-button",{attrs:{size:"small"},on:{click:t.handleDownload}},[t._v("保存结果")]),e("el-dropdown",{attrs:{trigger:"click"},on:{command:t.downloadDemo},scopedSlots:t._u([{key:"dropdown",fn:function(){return[e("el-dropdown-menu",[e("el-dropdown-item",{attrs:{command:"templateTxt"}},[t._v("txt格式模板")]),e("el-dropdown-item",{attrs:{command:"templateM3u8"}},[t._v("m3u8模板")])],1)]},proxy:!0}])},[e("el-button",{attrs:{size:"small"}},[t._v("下载模板")])],1)],1),e("div",{staticClass:"textarea-container"},[e("p",[e("span",[t._v(t._s(t.resultObj[t.typeValue]))])]),e("el-input",{attrs:{type:"textarea",placeholder:"请输入内容"},model:{value:t.resultValue,callback:function(e){t.resultValue=e},expression:"resultValue"}})],1)],1)},i=[],a=(n(70560),n(98858),n(61318),n(33228),n(16879)),r={name:"index",components:{},data(){return{initialValue:"",resultValue:"",typeValue:"txt",ul:"",templateM3u8:"/yian/static/template/demo.m3u8",templateTxt:"/yian/static/template/demo.txt",sourceObj:{txt:"txt格式源",m3u8:"m3u8格式源","txt转json":"txt格式源","m3u8转json":"m3u8格式源"},resultObj:{txt:"m3u8格式转换结果",m3u8:"txt格式转换结果","txt转json":"json格式结果","m3u8转json":"json格式结果"},typeOptions:[{value:"txt",label:"txt转m3u8格式"},{value:"m3u8",label:"m3u8转txt格式"},{value:"txt转json",label:"txt转json格式"},{value:"m3u8转json",label:"m3u8转json格式"}]}},mounted(){},methods:{handleFormatM3u8ToTXT(){if(!this.initialValue)return this.$message.error("请先填写m3u8格式源"),!1;if(this.initialValue.includes("#genre#"))return this.$message.error("m3u8格式源错误"),!1;const t=this.initialValue.split("\n");let e=null,n=null,l=null,i="";for(const a of t){const t=a.trim();if(""!==t)if(t.includes("group-title")){const n=t.lastIndexOf('group-title="'),i=t.lastIndexOf('",');e=t.slice(n,i).replace(/group-title="/,"").trim(),l=t.slice(i,t.length).replace(/",/,"").trim()}else if(!t.includes("#EXTM3U")){let a=",#genre#",r="";n!==e?(n=e,a=`${e},#genre#`,r=`${a}\n${l},${t}`):r=`${l},${t}`,i+=`${r}\n`}}this.resultValue=i},handleFormatTXTToM3u8(){if(!this.initialValue)return this.$message.error("请先填写TXT格式源"),!1;if(this.initialValue.includes("#EXTINF")||this.initialValue.includes("#EXTM3U"))return this.$message.error("TXT格式源错误"),!1;const t=this.initialValue.split("\n");let e='#EXTM3U x-tvg-url="https://live.fanmingming.com/e.xml"\n',n=null;for(const l of t){const t=l.trim();if(""!==t)if(t.includes("#genre#"))n=t.replace(/,#genre#/,"").trim();else{const[l,i]=t.split(",").map((t=>t.trim())),a=l.replace(/(CCTV|CETV)-(\d+).*/,"$1$2");e+=`#EXTINF:-1 tvg-name="${a}" tvg-logo="https://live.fanmingming.com/tv/${a}.png"`,n&&(e+=` group-title="${n}"`),e+=`,${l}\n${i}\n`}}this.resultValue=e},handleFormatTxtToJson(){if(!this.initialValue)return this.$message.error("请先填写TXT格式源"),!1;if(this.initialValue.includes("#EXTINF")||this.initialValue.includes("#EXTM3U"))return this.$message.error("TXT格式源错误"),!1;const t=this.initialValue.split("\n"),e=[];for(const n of t){const t=n.trim();if(""!==t&&!t.includes("#genre#")){const[n,l]=t.split(",").map((t=>t.trim())),i=e.findIndex((t=>t.text===n));if(-1===i){const t={text:n,children:[{text:"源1",id:(0,a.jA)(),url:l}]};e.push(t)}else{const t=e[i].children.length,n={text:`源${t+1}`,id:(0,a.jA)(),url:l};e[i].children.push(n)}}}this.resultValue=JSON.stringify(e,"",2)},handleFormatM3u8ToJson(){if(!this.initialValue)return this.$message.error("请先填写m3u8格式源"),!1;if(this.initialValue.includes("#genre#"))return this.$message.error("m3u8格式源错误"),!1;const t=this.initialValue.split("\n");let e=null;const n=[];for(const l of t){const t=l.trim();if(""!==t)if(t.includes("group-title")){const n=t.lastIndexOf('",');e=t.slice(n,t.length).replace(/",/,"").trim()}else if(!t.includes("#EXTM3U")&&!t.includes("#EXTINF")){const l=n.findIndex((t=>t.text===e));if(-1===l){const l={text:e,children:[{text:"源1",id:(0,a.jA)(),url:t}]};n.push(l)}else{const e=n[l].children.length,i={text:`源${e+1}`,id:(0,a.jA)(),url:t};n[l].children.push(i)}}}this.resultValue=JSON.stringify(n,"",2)},handleClear(){this.initialValue="",this.resultValue=""},handleCopyResult(){if(!this.resultValue)return this.$message.error("请先转换再拷贝"),!1;navigator.clipboard.writeText(this.resultValue).then((()=>{this.$message.success("复制成功")}))},handleDownload(){if(this.resultValue){const t=new Blob([this.resultValue],{type:"text/plain"}),e=document.createElement("a"),n=window.URL.createObjectURL(t);e.href=n;const l="txt"===this.typeValue?"m3u":"txt";e.download=`playlist.${l}`,document.body.appendChild(e),e.click(),document.body.removeChild(e),window.URL.revokeObjectURL(n)}else this.$message.error("内容为空，不可保存")},downloadDemo(t){console.log("command",t);const e=document.createElement("a");if(e.setAttribute("download",""),e.setAttribute("href",this[t]),document.all)e.click();else{const t=document.createEvent("MouseEvents");t.initEvent("click",!0,!0),e.dispatchEvent(t)}}}},s=r,o=n(1001),u=(0,o.Z)(s,l,i,!1,null,"55677054",null),c=u.exports},16879:function(t,e,n){n.d(e,{jA:function(){return i},o4:function(){return l}});n(70560),n(98858),n(61318),n(33228);function l(t,e,n="creatDate"){return Date.parse(e[n])-Date.parse(t[n])}function i(){let t=(new Date).getTime();const e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{const n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?n:3&n|8).toString(16)}));return e}},50926:function(t,e,n){var l=n(23043),i=n(69985),a=n(6648),r=n(44201),s=r("toStringTag"),o=Object,u="Arguments"===a(function(){return arguments}()),c=function(t,e){try{return t[e]}catch(n){}};t.exports=l?a:function(t){var e,n,l;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=c(e=o(t),s))?n:u?a(e):"Object"===(l=a(e))&&i(e.callee)?"Arguments":l}},62148:function(t,e,n){var l=n(98702),i=n(72560);t.exports=function(t,e,n){return n.get&&l(n.get,e,{getter:!0}),n.set&&l(n.set,e,{setter:!0}),i.f(t,e,n)}},23043:function(t,e,n){var l=n(44201),i=l("toStringTag"),a={};a[i]="z",t.exports="[object z]"===String(a)},34327:function(t,e,n){var l=n(50926),i=String;t.exports=function(t){if("Symbol"===l(t))throw new TypeError("Cannot convert a Symbol value to a string");return i(t)}},21500:function(t){var e=TypeError;t.exports=function(t,n){if(t<n)throw new e("Not enough arguments");return t}},98858:function(t,e,n){var l=n(11880),i=n(68844),a=n(34327),r=n(21500),s=URLSearchParams,o=s.prototype,u=i(o.append),c=i(o["delete"]),d=i(o.forEach),m=i([].push),h=new s("a=1&a=2&b=3");h["delete"]("a",1),h["delete"]("b",void 0),h+""!=="a=2"&&l(o,"delete",(function(t){var e=arguments.length,n=e<2?void 0:arguments[1];if(e&&void 0===n)return c(this,t);var l=[];d(this,(function(t,e){m(l,{key:e,value:t})})),r(e,1);var i,s=a(t),o=a(n),h=0,p=0,f=!1,x=l.length;while(h<x)i=l[h++],f||i.key===s?(f=!0,c(this,i.key)):p++;while(p<x)i=l[p++],i.key===s&&i.value===o||u(this,i.key,i.value)}),{enumerable:!0,unsafe:!0})},61318:function(t,e,n){var l=n(11880),i=n(68844),a=n(34327),r=n(21500),s=URLSearchParams,o=s.prototype,u=i(o.getAll),c=i(o.has),d=new s("a=1");!d.has("a",2)&&d.has("a",void 0)||l(o,"has",(function(t){var e=arguments.length,n=e<2?void 0:arguments[1];if(e&&void 0===n)return c(this,t);var l=u(this,t);r(e,1);var i=a(n),s=0;while(s<l.length)if(l[s++]===i)return!0;return!1}),{enumerable:!0,unsafe:!0})},33228:function(t,e,n){var l=n(67697),i=n(68844),a=n(62148),r=URLSearchParams.prototype,s=i(r.forEach);l&&!("size"in r)&&a(r,"size",{get:function(){var t=0;return s(this,(function(){t++})),t},configurable:!0,enumerable:!0})}}]);
//# sourceMappingURL=363.65612e0b.js.map