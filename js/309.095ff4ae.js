"use strict";(self["webpackChunkyian"]=self["webpackChunkyian"]||[]).push([[309],{3309:function(e,t,n){n.r(t),n.d(t,{default:function(){return u}});var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[t("el-select",{attrs:{placeholder:"请选择"},on:{change:e.handleClear},model:{value:e.typeValue,callback:function(t){e.typeValue=t},expression:"typeValue"}},e._l(e.typeOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),t("div",{staticClass:"textarea-container"},[t("p",["txt"===e.typeValue?t("span",[e._v("txt格式源:")]):t("span",[e._v("m3u8格式源:")])]),t("el-input",{attrs:{type:"textarea",placeholder:"请输入内容"},model:{value:e.initialValue,callback:function(t){e.initialValue=t},expression:"initialValue"}})],1),t("div",{staticClass:"btns-box"},["txt"===e.typeValue?t("el-button",{attrs:{size:"small"},on:{click:e.handleFormatToM3u8}},[e._v("格式转换")]):t("el-button",{attrs:{size:"small"},on:{click:e.handleFormatToTXT}},[e._v("格式转换")]),t("el-button",{attrs:{size:"small"},on:{click:e.handleClear}},[e._v("清空屏幕")]),t("el-button",{attrs:{size:"small"},on:{click:e.handleCopyResult}},[e._v("拷贝结果")]),t("el-button",{attrs:{size:"small"},on:{click:e.handleDownload}},[e._v("保存结果")]),t("el-dropdown",{attrs:{trigger:"click"},on:{command:e.downloadDemo},scopedSlots:e._u([{key:"dropdown",fn:function(){return[t("el-dropdown-menu",[t("el-dropdown-item",{attrs:{command:"templateTxt"}},[e._v("txt格式模板")]),t("el-dropdown-item",{attrs:{command:"templateM3u8"}},[e._v("m3u8模板")])],1)]},proxy:!0}])},[t("el-button",{attrs:{size:"small"}},[e._v("下载模板")])],1)],1),t("div",{staticClass:"textarea-container"},[t("p",["txt"===e.typeValue?t("span",[e._v("m3u8格式转换结果:")]):t("span",[e._v("txt格式转换结果:")])]),t("el-input",{attrs:{type:"textarea",placeholder:"请输入内容"},model:{value:e.resultValue,callback:function(t){e.resultValue=t},expression:"resultValue"}})],1)],1)},l=[],i=(n(98858),n(61318),n(33228),{name:"index",components:{},data(){return{initialValue:"",resultValue:"",typeValue:"txt",templateM3u8:"/yian/static/template/demo.m3u8",templateTxt:"/yian/static/template/demo.txt",typeOptions:[{value:"txt",label:"txt转m3u8格式"},{value:"m3u8",label:"m3u8转txt格式"}]}},props:{},watch:{},computed:{},mounted(){},methods:{handleFormatToTXT(){if(!this.initialValue)return this.$message.error("请先填写m3u8格式源"),!1;if(this.initialValue.includes("#genre#"))return this.$message.error("TXT格式源错误"),!1;const e=this.initialValue.split("\n");let t=null,n=null,a=null,l="";for(const i of e){const e=i.trim();if(""!==e)if(e.includes("group-title")){const n=e.lastIndexOf('group-title="'),l=e.lastIndexOf('",');t=e.slice(n,l).replace(/group-title="/,"").trim(),a=e.slice(l,e.length).replace(/",/,"").trim()}else if(!e.includes("#EXTM3U")){let i=",#genre#",r="";n!==t?(n=t,i=`${t},#genre#`,r=`${i}\n${a},${e}`):r=`${a},${e}`,l+=`${r}\n`}}this.resultValue=l},handleFormatToM3u8(){if(!this.initialValue)return this.$message.error("请先填写TXT格式源"),!1;if(this.initialValue.includes("#EXTINF")||this.initialValue.includes("#EXTM3U"))return this.$message.error("TXT格式源错误"),!1;const e=this.initialValue.split("\n");let t='#EXTM3U x-tvg-url="https://live.fanmingming.com/e.xml"\n',n=null;for(const a of e){const e=a.trim();if(""!==e)if(e.includes("#genre#"))n=e.replace(/,#genre#/,"").trim();else{const[a,l]=e.split(",").map((e=>e.trim())),i=a.replace(/(CCTV|CETV)-(\d+).*/,"$1$2");t+=`#EXTINF:-1 tvg-name="${i}" tvg-logo="https://live.fanmingming.com/tv/${i}.png"`,n&&(t+=` group-title="${n}"`),t+=`,${a}\n${l}\n`}}this.resultValue=t},handleClear(){this.initialValue="",this.resultValue=""},handleCopyResult(){navigator.clipboard.writeText(this.resultValue).then((()=>{this.$message.success("复制成功")}))},handleDownload(){if(this.resultValue){const e=new Blob([this.resultValue],{type:"text/plain"}),t=document.createElement("a"),n=window.URL.createObjectURL(e);t.href=n;const a="txt"===this.typeValue?"m3u":"txt";t.download=`playlist.${a}`,document.body.appendChild(t),t.click(),document.body.removeChild(t),window.URL.revokeObjectURL(n)}else this.$message.error("内容为空，不可保存")},downloadDemo(e){console.log("command",e);const t=document.createElement("a");if(t.setAttribute("download",""),t.setAttribute("href",this[e]),document.all)t.click();else{const e=document.createEvent("MouseEvents");e.initEvent("click",!0,!0),t.dispatchEvent(e)}}}}),r=i,o=n(1001),s=(0,o.Z)(r,a,l,!1,null,"f6aa8fa2",null),u=s.exports},50926:function(e,t,n){var a=n(23043),l=n(69985),i=n(6648),r=n(44201),o=r("toStringTag"),s=Object,u="Arguments"===i(function(){return arguments}()),c=function(e,t){try{return e[t]}catch(n){}};e.exports=a?i:function(e){var t,n,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=c(t=s(e),o))?n:u?i(t):"Object"===(a=i(t))&&l(t.callee)?"Arguments":a}},62148:function(e,t,n){var a=n(98702),l=n(72560);e.exports=function(e,t,n){return n.get&&a(n.get,t,{getter:!0}),n.set&&a(n.set,t,{setter:!0}),l.f(e,t,n)}},23043:function(e,t,n){var a=n(44201),l=a("toStringTag"),i={};i[l]="z",e.exports="[object z]"===String(i)},34327:function(e,t,n){var a=n(50926),l=String;e.exports=function(e){if("Symbol"===a(e))throw new TypeError("Cannot convert a Symbol value to a string");return l(e)}},21500:function(e){var t=TypeError;e.exports=function(e,n){if(e<n)throw new t("Not enough arguments");return e}},98858:function(e,t,n){var a=n(11880),l=n(68844),i=n(34327),r=n(21500),o=URLSearchParams,s=o.prototype,u=l(s.append),c=l(s["delete"]),d=l(s.forEach),p=l([].push),m=new o("a=1&a=2&b=3");m["delete"]("a",1),m["delete"]("b",void 0),m+""!=="a=2"&&a(s,"delete",(function(e){var t=arguments.length,n=t<2?void 0:arguments[1];if(t&&void 0===n)return c(this,e);var a=[];d(this,(function(e,t){p(a,{key:t,value:e})})),r(t,1);var l,o=i(e),s=i(n),m=0,h=0,f=!1,v=a.length;while(m<v)l=a[m++],f||l.key===o?(f=!0,c(this,l.key)):h++;while(h<v)l=a[h++],l.key===o&&l.value===s||u(this,l.key,l.value)}),{enumerable:!0,unsafe:!0})},61318:function(e,t,n){var a=n(11880),l=n(68844),i=n(34327),r=n(21500),o=URLSearchParams,s=o.prototype,u=l(s.getAll),c=l(s.has),d=new o("a=1");!d.has("a",2)&&d.has("a",void 0)||a(s,"has",(function(e){var t=arguments.length,n=t<2?void 0:arguments[1];if(t&&void 0===n)return c(this,e);var a=u(this,e);r(t,1);var l=i(n),o=0;while(o<a.length)if(a[o++]===l)return!0;return!1}),{enumerable:!0,unsafe:!0})},33228:function(e,t,n){var a=n(67697),l=n(68844),i=n(62148),r=URLSearchParams.prototype,o=l(r.forEach);a&&!("size"in r)&&i(r,"size",{get:function(){var e=0;return o(this,(function(){e++})),e},configurable:!0,enumerable:!0})}}]);
//# sourceMappingURL=309.095ff4ae.js.map