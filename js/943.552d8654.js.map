{"version":3,"file":"js/943.552d8654.js","mappings":"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","sources":["webpack://yian/./src/views/mapTest/index.vue","webpack://yian/src/views/mapTest/index.vue","webpack://yian/./src/views/mapTest/index.vue?9e25","webpack://yian/./src/views/mapTest/index.vue?7101"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('ul',{staticClass:\"drawing-panel\"},[_c('li',{class:['bmap-btn', 'bmap-marker', {active: _vm.activeTool === 'marker'}],on:{\"click\":function($event){return _vm.draw('marker')}}}),_c('li',{class:['bmap-btn', 'bmap-polyline', {active: _vm.activeTool === 'polyline'}],on:{\"click\":function($event){return _vm.draw('polyline')}}}),_c('li',{class:['bmap-btn', 'bmap-rectangle', {active: _vm.activeTool === 'rectangle'}],on:{\"click\":function($event){return _vm.draw('rectangle')}}}),_c('li',{class:['bmap-btn', 'bmap-polygon', {active: _vm.activeTool === 'polygon'}],on:{\"click\":function($event){return _vm.draw('polygon')}}}),_c('li',{class:['bmap-btn', 'bmap-circle', {active: _vm.activeTool === 'circle'}],on:{\"click\":function($event){return _vm.draw('circle')}}})]),_c('div',{attrs:{\"id\":\"container\"}})])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n<!--    <div class=\"info\">该示例实现基于JSAPI GL版的开源工具库，详情可查看<a href=\"https://github.com/huiyan-fe/BMapGLLib\" target=\"_blank\">GitHub</a></div>-->\n    <ul class=\"drawing-panel\">\n      <li :class=\"['bmap-btn', 'bmap-marker', {active: activeTool === 'marker'}]\" @click=\"draw('marker')\"></li>\n      <li :class=\"['bmap-btn', 'bmap-polyline', {active: activeTool === 'polyline'}]\" @click=\"draw('polyline')\"></li>\n      <li :class=\"['bmap-btn', 'bmap-rectangle', {active: activeTool === 'rectangle'}]\" @click=\"draw('rectangle')\"></li>\n      <li :class=\"['bmap-btn', 'bmap-polygon', {active: activeTool === 'polygon'}]\" @click=\"draw('polygon')\"></li>\n      <li :class=\"['bmap-btn', 'bmap-circle', {active: activeTool === 'circle'}]\" @click=\"draw('circle')\"></li>\n    </ul>\n    <div id=\"container\"></div>\n  </div>\n</template>\n\n<script>\nexport default {\n  data () {\n    return {\n      map: null,\n      drawingManager: null,\n      activeTool: null,\n      styleOptions: {\n        strokeColor: '#5E87DB',\n        fillColor: '#5E87DB',\n        strokeWeight: 2,\n        strokeOpacity: 1,\n        fillOpacity: 0.2\n      },\n      labelOptions: {\n        borderRadius: '2px',\n        background: '#FFFBCC',\n        border: '1px solid #E1E1E1',\n        color: '#703A04',\n        fontSize: '12px',\n        letterSpacing: '0',\n        padding: '5px'\n      }\n    };\n  },\n  mounted () {\n    setTimeout(() => {\n      /* eslint-disable-next-line no-undef */\n      if (typeof BMapGL !== 'undefined') {\n        this.initMap();\n      } else {\n        console.error('百度地图API加载失败');\n      }\n    }, 3000); // 延迟1秒确保百度地图API已加载\n  },\n  methods: {\n    initMap () {\n      // 初始化地图实例\n      /* eslint-disable-next-line no-undef */\n      this.map = new BMapGL.Map('container', { enableMapClick: false });\n      /* eslint-disable-next-line no-undef */\n      this.map.centerAndZoom(new BMapGL.Point(116.404, 39.915), 11);\n      this.map.enableScrollWheelZoom(true);\n\n      // 实例化鼠标绘制工具\n      /* eslint-disable-next-line no-undef */\n      this.drawingManager = new BMapGLLib.DrawingManager(this.map, {\n        // isOpen: true,        // 是否开启绘制模式\n        enableCalculate: false, // 绘制是否进行测距测面\n        enableSorption: true, // 是否开启边界吸附功能\n        sorptiondistance: 20, // 边界吸附距离\n        circleOptions: this.styleOptions, // 圆的样式\n        polylineOptions: this.styleOptions, // 线的样式\n        polygonOptions: this.styleOptions, // 多边形的样式\n        rectangleOptions: this.styleOptions, // 矩形的样式\n        labelOptions: this.labelOptions // label样式\n      });\n      console.log('this.drawingManager', this.drawingManager);\n      // this.drawingManager.addEventListener('polygoncomplete', function (e) {\n      //   console.log('e', e);\n      //   console.log('getPath1', e.overlay.getPath());\n      // });\n      // 完成后触发\n      this.drawingManager.addEventListener('overlaycomplete', function (e) {\n        console.log(e.drawingMode);\n        // 获取绘制结果\n        console.log('getPath2', e.overlay.getPath());\n        console.log(e.calculate);\n        console.log(e.label);\n      });\n    },\n    draw (tool) {\n      console.log('this.drawingManager', this.drawingManager);\n      const tools = ['marker', 'polyline', 'rectangle', 'polygon', 'circle'];\n      tools.forEach(t => (this.activeTool = t === tool ? tool : null));\n      let drawingType;\n      switch (tool) {\n        case 'marker': drawingType = window.BMAP_DRAWING_MARKER; break;\n        case 'polyline': drawingType = window.BMAP_DRAWING_POLYLINE; break;\n        case 'rectangle': drawingType = window.BMAP_DRAWING_RECTANGLE; break;\n        case 'polygon': drawingType = window.BMAP_DRAWING_POLYGON; break;\n        case 'circle': drawingType = window.BMAP_DRAWING_CIRCLE; break;\n      }\n      if (this.drawingManager._isOpen && this.drawingManager.getDrawingMode() === drawingType) {\n        this.drawingManager.close();\n      } else {\n        this.drawingManager.setDrawingMode(drawingType);\n        this.drawingManager.open();\n      }\n    }\n  }\n};\n</script>\n\n<style scoped>\nbody, html, #container {\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  margin: 0;\n  font-family: \"微软雅黑\";\n}\n.info {\n  z-index: 999;\n  width: auto;\n  min-width: 22rem;\n  padding: .75rem 1.25rem;\n  margin-left: 1.25rem;\n  position: fixed;\n  top: 1rem;\n  background-color: #fff;\n  border-radius: .25rem;\n  font-size: 14px;\n  color: #666;\n  box-shadow: 0 2px 6px 0 rgba(27, 142, 236, 0.5);\n}\n.drawing-panel {\n  z-index: 999;\n  position: fixed;\n  bottom: 3.5rem;\n  margin-left: 2.5rem;\n  padding-left: 0;\n  border-radius: .25rem;\n  height: 47px;\n  box-shadow: 0 2px 6px 0 rgba(27, 142, 236, 0.5);\n}\n.bmap-btn {\n  border-right: 1px solid #d2d2d2;\n  float: left;\n  width: 64px;\n  height: 100%;\n  background-image: url(//api.map.baidu.com/library/DrawingManager/1.4/src/bg_drawing_tool.png);\n  cursor: pointer;\n}\n.drawing-panel .bmap-marker {\n  background-position: -65px 0;\n}\n.drawing-panel .bmap-polyline {\n  background-position: -195px 0;\n}\n.drawing-panel .bmap-rectangle {\n  background-position: -325px 0;\n}\n.drawing-panel .bmap-polygon {\n  background-position: -260px 0;\n}\n.drawing-panel .bmap-circle {\n  background-position: -130px 0;\n}\n.active {\n  background-position-y: -52px !important;\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=809b8272&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=809b8272&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"809b8272\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","class","active","activeTool","on","$event","draw","attrs","staticRenderFns","data","map","drawingManager","styleOptions","strokeColor","fillColor","strokeWeight","strokeOpacity","fillOpacity","labelOptions","borderRadius","background","border","color","fontSize","letterSpacing","padding","mounted","setTimeout","BMapGL","initMap","console","error","methods","Map","enableMapClick","centerAndZoom","Point","enableScrollWheelZoom","BMapGLLib","DrawingManager","enableCalculate","enableSorption","sorptiondistance","circleOptions","polylineOptions","polygonOptions","rectangleOptions","log","addEventListener","e","drawingMode","overlay","getPath","calculate","label","tool","tools","drawingType","forEach","t","window","BMAP_DRAWING_MARKER","BMAP_DRAWING_POLYLINE","BMAP_DRAWING_RECTANGLE","BMAP_DRAWING_POLYGON","BMAP_DRAWING_CIRCLE","_isOpen","getDrawingMode","close","setDrawingMode","open","component"],"sourceRoot":""}