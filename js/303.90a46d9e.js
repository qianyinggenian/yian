"use strict";(self["webpackChunkyian"]=self["webpackChunkyian"]||[]).push([[303],{303:function(e,t,n){n.r(t),n.d(t,{default:function(){return u}});var l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[t("el-select",{attrs:{placeholder:"请选择"},on:{change:e.handleClear},model:{value:e.typeValue,callback:function(t){e.typeValue=t},expression:"typeValue"}},e._l(e.typeOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),t("div",{staticClass:"textarea-container"},[t("p",[t("span",[e._v(e._s(e.sourceObj[e.typeValue]))])]),t("el-input",{attrs:{type:"textarea",placeholder:"请输入内容"},model:{value:e.initialValue,callback:function(t){e.initialValue=t},expression:"initialValue"}})],1),t("div",{staticClass:"btns-box"},["txt"===e.typeValue?t("el-button",{attrs:{size:"small"},on:{click:e.handleFormatTXTToM3u8}},[e._v("格式转换")]):"m3u8"===e.typeValue?t("el-button",{attrs:{size:"small"},on:{click:e.handleFormatM3u8ToTXT}},[e._v("格式转换")]):"txt转json"===e.typeValue?t("el-button",{attrs:{size:"small"},on:{click:e.handleFormatTxtToJson}},[e._v("格式转换")]):"m3u8转json"===e.typeValue?t("el-button",{attrs:{size:"small"},on:{click:e.handleFormatM3u8ToJson}},[e._v("格式转换")]):e._e(),t("el-button",{attrs:{size:"small"},on:{click:e.handleClear}},[e._v("清空屏幕")]),t("el-button",{attrs:{size:"small"},on:{click:e.handleCopyResult}},[e._v("拷贝结果")]),t("el-button",{attrs:{size:"small"},on:{click:e.handleDownload}},[e._v("保存结果")]),t("el-dropdown",{attrs:{trigger:"click"},on:{command:e.downloadDemo},scopedSlots:e._u([{key:"dropdown",fn:function(){return[t("el-dropdown-menu",[t("el-dropdown-item",{attrs:{command:"templateTxt"}},[e._v("txt格式模板")]),t("el-dropdown-item",{attrs:{command:"templateM3u8"}},[e._v("m3u8模板")])],1)]},proxy:!0}])},[t("el-button",{attrs:{size:"small"}},[e._v("下载模板")])],1)],1),t("div",{staticClass:"textarea-container"},[t("p",[t("span",[e._v(e._s(e.resultObj[e.typeValue]))])]),t("el-input",{attrs:{type:"textarea",placeholder:"请输入内容"},model:{value:e.resultValue,callback:function(t){e.resultValue=t},expression:"resultValue"}})],1)],1)},i=[],a=(n(70560),n(98858),n(61318),n(33228),{name:"index",components:{},data(){return{initialValue:"",resultValue:"",typeValue:"txt",ul:"",templateM3u8:"/yian/static/template/demo.m3u8",templateTxt:"/yian/static/template/demo.txt",sourceObj:{txt:"txt格式源",m3u8:"m3u8格式源","txt转json":"txt格式源","m3u8转json":"m3u8格式源"},resultObj:{txt:"m3u8格式转换结果",m3u8:"txt格式转换结果","txt转json":"json格式结果","m3u8转json":"json格式结果"},typeOptions:[{value:"txt",label:"txt转m3u8格式"},{value:"m3u8",label:"m3u8转txt格式"},{value:"txt转json",label:"txt转json格式"},{value:"m3u8转json",label:"m3u8转json格式"}]}},mounted(){},methods:{handleFormatM3u8ToTXT(){if(!this.initialValue)return this.$message.error("请先填写m3u8格式源"),!1;if(this.initialValue.includes("#genre#"))return this.$message.error("m3u8格式源错误"),!1;const e=this.initialValue.split("\n");let t=null,n=null,l=null,i="";for(const a of e){const e=a.trim();if(""!==e)if(e.includes("group-title")){const n=e.lastIndexOf('group-title="'),i=e.lastIndexOf('",');t=e.slice(n,i).replace(/group-title="/,"").trim(),l=e.slice(i,e.length).replace(/",/,"").trim()}else if(!e.includes("#EXTM3U")){let a=",#genre#",s="";n!==t?(n=t,a=`${t},#genre#`,s=`${a}\n${l},${e}`):s=`${l},${e}`,i+=`${s}\n`}}this.resultValue=i},handleFormatTXTToM3u8(){if(!this.initialValue)return this.$message.error("请先填写TXT格式源"),!1;if(this.initialValue.includes("#EXTINF")||this.initialValue.includes("#EXTM3U"))return this.$message.error("TXT格式源错误"),!1;const e=this.initialValue.split("\n");let t='#EXTM3U x-tvg-url="https://live.fanmingming.com/e.xml"\n',n=null;for(const l of e){const e=l.trim();if(""!==e)if(e.includes("#genre#"))n=e.replace(/,#genre#/,"").trim();else{const[l,i]=e.split(",").map((e=>e.trim())),a=l.replace(/(CCTV|CETV)-(\d+).*/,"$1$2");t+=`#EXTINF:-1 tvg-name="${a}" tvg-logo="https://live.fanmingming.com/tv/${a}.png"`,n&&(t+=` group-title="${n}"`),t+=`,${l}\n${i}\n`}}this.resultValue=t},handleFormatTxtToJson(){if(!this.initialValue)return this.$message.error("请先填写TXT格式源"),!1;if(this.initialValue.includes("#EXTINF")||this.initialValue.includes("#EXTM3U"))return this.$message.error("TXT格式源错误"),!1;const e=this.initialValue.split("\n"),t=[];for(const n of e){const e=n.trim();if(""!==e&&!e.includes("#genre#")){const[n,l]=e.split(",").map((e=>e.trim())),i=t.findIndex((e=>e.text===n));if(-1===i){const e={text:n,children:[{text:"源1",id:1,url:l}]};t.push(e)}else{const e=t[i].children.length,n={text:`源${e+1}`,id:e+1,url:l};t[i].children.push(n)}}}this.resultValue=JSON.stringify(t,"",2)},handleFormatM3u8ToJson(){if(!this.initialValue)return this.$message.error("请先填写m3u8格式源"),!1;if(this.initialValue.includes("#genre#"))return this.$message.error("m3u8格式源错误"),!1;const e=this.initialValue.split("\n");let t=null;const n=[];for(const l of e){const e=l.trim();if(""!==e)if(e.includes("group-title")){const n=e.lastIndexOf('",');t=e.slice(n,e.length).replace(/",/,"").trim()}else if(!e.includes("#EXTM3U")&&!e.includes("#EXTINF")){const l=n.findIndex((e=>e.text===t));if(-1===l){const l={text:t,children:[{text:"源1",id:1,url:e}]};n.push(l)}else{const t=n[l].children.length,i={text:`源${t+1}`,id:t+1,url:e};n[l].children.push(i)}}}this.resultValue=JSON.stringify(n,"",2)},handleClear(){this.initialValue="",this.resultValue=""},handleCopyResult(){if(!this.resultValue)return this.$message.error("请先转换再拷贝"),!1;navigator.clipboard.writeText(this.resultValue).then((()=>{this.$message.success("复制成功")}))},handleDownload(){if(this.resultValue){const e=new Blob([this.resultValue],{type:"text/plain"}),t=document.createElement("a"),n=window.URL.createObjectURL(e);t.href=n;const l="txt"===this.typeValue?"m3u":"txt";t.download=`playlist.${l}`,document.body.appendChild(t),t.click(),document.body.removeChild(t),window.URL.revokeObjectURL(n)}else this.$message.error("内容为空，不可保存")},downloadDemo(e){console.log("command",e);const t=document.createElement("a");if(t.setAttribute("download",""),t.setAttribute("href",this[e]),document.all)t.click();else{const e=document.createEvent("MouseEvents");e.initEvent("click",!0,!0),t.dispatchEvent(e)}}}}),s=a,r=n(1001),o=(0,r.Z)(s,l,i,!1,null,"498bd1aa",null),u=o.exports},50926:function(e,t,n){var l=n(23043),i=n(69985),a=n(6648),s=n(44201),r=s("toStringTag"),o=Object,u="Arguments"===a(function(){return arguments}()),c=function(e,t){try{return e[t]}catch(n){}};e.exports=l?a:function(e){var t,n,l;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=c(t=o(e),r))?n:u?a(t):"Object"===(l=a(t))&&i(t.callee)?"Arguments":l}},62148:function(e,t,n){var l=n(98702),i=n(72560);e.exports=function(e,t,n){return n.get&&l(n.get,t,{getter:!0}),n.set&&l(n.set,t,{setter:!0}),i.f(e,t,n)}},23043:function(e,t,n){var l=n(44201),i=l("toStringTag"),a={};a[i]="z",e.exports="[object z]"===String(a)},34327:function(e,t,n){var l=n(50926),i=String;e.exports=function(e){if("Symbol"===l(e))throw new TypeError("Cannot convert a Symbol value to a string");return i(e)}},21500:function(e){var t=TypeError;e.exports=function(e,n){if(e<n)throw new t("Not enough arguments");return e}},98858:function(e,t,n){var l=n(11880),i=n(68844),a=n(34327),s=n(21500),r=URLSearchParams,o=r.prototype,u=i(o.append),c=i(o["delete"]),d=i(o.forEach),m=i([].push),h=new r("a=1&a=2&b=3");h["delete"]("a",1),h["delete"]("b",void 0),h+""!=="a=2"&&l(o,"delete",(function(e){var t=arguments.length,n=t<2?void 0:arguments[1];if(t&&void 0===n)return c(this,e);var l=[];d(this,(function(e,t){m(l,{key:t,value:e})})),s(t,1);var i,r=a(e),o=a(n),h=0,p=0,f=!1,v=l.length;while(h<v)i=l[h++],f||i.key===r?(f=!0,c(this,i.key)):p++;while(p<v)i=l[p++],i.key===r&&i.value===o||u(this,i.key,i.value)}),{enumerable:!0,unsafe:!0})},61318:function(e,t,n){var l=n(11880),i=n(68844),a=n(34327),s=n(21500),r=URLSearchParams,o=r.prototype,u=i(o.getAll),c=i(o.has),d=new r("a=1");!d.has("a",2)&&d.has("a",void 0)||l(o,"has",(function(e){var t=arguments.length,n=t<2?void 0:arguments[1];if(t&&void 0===n)return c(this,e);var l=u(this,e);s(t,1);var i=a(n),r=0;while(r<l.length)if(l[r++]===i)return!0;return!1}),{enumerable:!0,unsafe:!0})},33228:function(e,t,n){var l=n(67697),i=n(68844),a=n(62148),s=URLSearchParams.prototype,r=i(s.forEach);l&&!("size"in s)&&a(s,"size",{get:function(){var e=0;return r(this,(function(){e++})),e},configurable:!0,enumerable:!0})}}]);
//# sourceMappingURL=303.90a46d9e.js.map