"use strict";(self["webpackChunkyian"]=self["webpackChunkyian"]||[]).push([[658],{85658:function(e,t,a){a.r(t),a.d(t,{default:function(){return p}});var l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container",attrs:{id:"container"}},[t("div",{staticClass:"tool-box"},[t("el-select",{attrs:{size:"small",filterable:"",placeholder:"请选择"},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},e._l(e.list,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),"图片转base64"===e.type?[t("input",{ref:"uploadBtn",staticStyle:{display:"none"},attrs:{type:"file",accept:".png,.jpeg,.jpg"},on:{change:e.onFileChange}}),t("el-button",{staticClass:"btn",attrs:{size:"small"},on:{click:e.handleUpload}},[e._v("选择文件")]),e.file?t("span",{staticStyle:{"margin-left":"10px"}},[e._v("已选择的文件："+e._s(e.file.name))]):e._e()]:e._e(),t("el-button",{staticClass:"btn",attrs:{size:"small"},on:{click:e.handleDownload}},[e._v("下载")]),t("el-button",{staticClass:"btn",attrs:{size:"small"},on:{click:e.handleCopyResult}},[e._v("拷贝")]),t("el-button",{attrs:{size:"small"},on:{click:e.exportAsImage}},[e._v("截图")])],2),"图片转base64"===e.type?t("div",{staticClass:"img-to-base64-container"},[e._v(" "+e._s(e.resultValue)+" ")]):t("div",{staticClass:"base64-to-img-container"},[t("div",{},[t("el-input",{attrs:{type:"textarea"},on:{input:e.resultValueChange},model:{value:e.resultValue,callback:function(t){e.resultValue=t},expression:"resultValue"}})],1),t("div",{},[t("img",{attrs:{src:e.resultValue,alt:""}})])])])},s=[],n=a(4901),i=a(20354),o=a.n(i),r={components:{},data(){return{file:null,resultValue:"",fileName:"",type:"图片转base64",url:"",fileType:["image/jpeg","image/jpg","image/png"],list:[{label:"base64转图片",value:"base64转图片"},{label:"图片转base64",value:"图片转base64"}]}},props:{},computed:{},watch:{},created(){},mounted(){},methods:{exportAsImage(){setTimeout((()=>{o()(document.getElementById("container"),{useCORS:!0,logging:!0,scale:1}).then((e=>{const t=document.createElement("a");t.download="map.jpg",t.href=e.toDataURL(),t.click()}))}),500)},resultValueChange(){this.url=this.resultValue},handleUpload(){this.$refs.uploadBtn.value="",this.$refs.uploadBtn.click()},async onFileChange(e){const t=e.target.files[0];if(this.file=t,this.fileName=(0,n.UY)(this.file.name,".").startStr,!t||!this.fileType.includes(t.type))return void this.$message.error("请选择一个图片文件！");const a=new FileReader;a.onload=e=>{this.resultValue=e.target.result},a.readAsDataURL(this.file)},handleDownload(){if(this.resultValue){const e=new Blob([this.resultValue],{type:"text/plain"}),t=document.createElement("a"),a=window.URL.createObjectURL(e);t.href=a,t.download=`${this.fileName}-base64.txt`,document.body.appendChild(t),t.click(),document.body.removeChild(t),window.URL.revokeObjectURL(a)}else this.$message.error("内容为空，不可保存")},handleCopyResult(){if(!this.resultValue)return this.$message.error("请先上传文件再拷贝"),!1;if(navigator.clipboard&&"function"===typeof navigator.clipboard.writeText)navigator.clipboard.writeText(this.resultValue).then((()=>{this.$message.success("复制成功")}));else{const t=document.createElement("textarea");t.value=this.resultValue,document.body.appendChild(t),t.select();try{const e=document.execCommand("copy");e?this.$message.success("复制成功"):this.$message.error("复制失败")}catch(e){this.$message.error("复制失败:",e)}document.body.removeChild(t)}}}},u=r,c=a(81656),d=(0,c.A)(u,l,s,!1,null,"fd746c88",null),p=d.exports}}]);
//# sourceMappingURL=658.5871f599.js.map