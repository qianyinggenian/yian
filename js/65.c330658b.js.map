{"version":3,"file":"js/65.c330658b.js","mappings":"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","sources":["webpack://yian/./node_modules/@amap/amap-jsapi-loader/dist/index.js","webpack://yian/./src/views/mapTest/index3.vue","webpack://yian/src/views/mapTest/index3.vue","webpack://yian/./src/views/mapTest/index3.vue?f50e","webpack://yian/./src/views/mapTest/index3.vue?c346","webpack://yian/./src/common/js/mk.js"],"sourcesContent":["'use strict';(function(m,p){\"object\"===typeof exports&&\"undefined\"!==typeof module?module.exports=p():\"function\"===typeof define&&define.amd?define(p):(m=m||self,m.AMapLoader=p())})(this,function(){function m(a){var b=[];a.AMapUI&&b.push(p(a.AMapUI));a.Loca&&b.push(r(a.Loca));return Promise.all(b)}function p(a){return new Promise(function(h,c){var f=[];if(a.plugins)for(var e=0;e<a.plugins.length;e+=1)-1==d.AMapUI.plugins.indexOf(a.plugins[e])&&f.push(a.plugins[e]);if(g.AMapUI===b.failed)c(\"\\u524d\\u6b21\\u8bf7\\u6c42 AMapUI \\u5931\\u8d25\");\nelse if(g.AMapUI===b.notload){g.AMapUI=b.loading;d.AMapUI.version=a.version||d.AMapUI.version;e=d.AMapUI.version;var l=document.body||document.head,k=document.createElement(\"script\");k.type=\"text/javascript\";k.src=\"https://webapi.amap.com/ui/\"+e+\"/main.js\";k.onerror=function(a){g.AMapUI=b.failed;c(\"\\u8bf7\\u6c42 AMapUI \\u5931\\u8d25\")};k.onload=function(){g.AMapUI=b.loaded;if(f.length)window.AMapUI.loadUI(f,function(){for(var a=0,b=f.length;a<b;a++){var c=f[a].split(\"/\").slice(-1)[0];window.AMapUI[c]=\narguments[a]}for(h();n.AMapUI.length;)n.AMapUI.splice(0,1)[0]()});else for(h();n.AMapUI.length;)n.AMapUI.splice(0,1)[0]()};l.appendChild(k)}else g.AMapUI===b.loaded?a.version&&a.version!==d.AMapUI.version?c(\"\\u4e0d\\u5141\\u8bb8\\u591a\\u4e2a\\u7248\\u672c AMapUI \\u6df7\\u7528\"):f.length?window.AMapUI.loadUI(f,function(){for(var a=0,b=f.length;a<b;a++){var c=f[a].split(\"/\").slice(-1)[0];window.AMapUI[c]=arguments[a]}h()}):h():a.version&&a.version!==d.AMapUI.version?c(\"\\u4e0d\\u5141\\u8bb8\\u591a\\u4e2a\\u7248\\u672c AMapUI \\u6df7\\u7528\"):\nn.AMapUI.push(function(a){a?c(a):f.length?window.AMapUI.loadUI(f,function(){for(var a=0,b=f.length;a<b;a++){var c=f[a].split(\"/\").slice(-1)[0];window.AMapUI[c]=arguments[a]}h()}):h()})})}function r(a){return new Promise(function(h,c){if(g.Loca===b.failed)c(\"\\u524d\\u6b21\\u8bf7\\u6c42 Loca \\u5931\\u8d25\");else if(g.Loca===b.notload){g.Loca=b.loading;d.Loca.version=a.version||d.Loca.version;var f=d.Loca.version,e=d.AMap.version.startsWith(\"2\"),l=f.startsWith(\"2\");if(e&&!l||!e&&l)c(\"JSAPI \\u4e0e Loca \\u7248\\u672c\\u4e0d\\u5bf9\\u5e94\\uff01\\uff01\");\nelse{e=d.key;l=document.body||document.head;var k=document.createElement(\"script\");k.type=\"text/javascript\";k.src=\"https://webapi.amap.com/loca?v=\"+f+\"&key=\"+e;k.onerror=function(a){g.Loca=b.failed;c(\"\\u8bf7\\u6c42 AMapUI \\u5931\\u8d25\")};k.onload=function(){g.Loca=b.loaded;for(h();n.Loca.length;)n.Loca.splice(0,1)[0]()};l.appendChild(k)}}else g.Loca===b.loaded?a.version&&a.version!==d.Loca.version?c(\"\\u4e0d\\u5141\\u8bb8\\u591a\\u4e2a\\u7248\\u672c Loca \\u6df7\\u7528\"):h():a.version&&a.version!==d.Loca.version?\nc(\"\\u4e0d\\u5141\\u8bb8\\u591a\\u4e2a\\u7248\\u672c Loca \\u6df7\\u7528\"):n.Loca.push(function(a){a?c(a):c()})})}if(!window)throw Error(\"AMap JSAPI can only be used in Browser.\");var b;(function(a){a.notload=\"notload\";a.loading=\"loading\";a.loaded=\"loaded\";a.failed=\"failed\"})(b||(b={}));var d={key:\"\",AMap:{version:\"1.4.15\",plugins:[]},AMapUI:{version:\"1.1\",plugins:[]},Loca:{version:\"1.3.2\"}},g={AMap:b.notload,AMapUI:b.notload,Loca:b.notload},n={AMap:[],AMapUI:[],Loca:[]},q=[],t=function(a){\"function\"==typeof a&&\n(g.AMap===b.loaded?a(window.AMap):q.push(a))};return{load:function(a){return new Promise(function(h,c){if(g.AMap==b.failed)c(\"\");else if(g.AMap==b.notload){var f=a.key,e=a.version,l=a.plugins;f?(window.AMap&&\"lbs.amap.com\"!==location.host&&c(\"\\u7981\\u6b62\\u591a\\u79cdAPI\\u52a0\\u8f7d\\u65b9\\u5f0f\\u6df7\\u7528\"),d.key=f,d.AMap.version=e||d.AMap.version,d.AMap.plugins=l||d.AMap.plugins,g.AMap=b.loading,e=document.body||document.head,window.___onAPILoaded=function(d){delete window.___onAPILoaded;if(d)g.AMap=\nb.failed,c(d);else for(g.AMap=b.loaded,m(a).then(function(){h(window.AMap)})[\"catch\"](c);q.length;)q.splice(0,1)[0]()},l=document.createElement(\"script\"),l.type=\"text/javascript\",l.src=\"https://webapi.amap.com/maps?callback=___onAPILoaded&v=\"+d.AMap.version+\"&key=\"+f+\"&plugin=\"+d.AMap.plugins.join(\",\"),l.onerror=function(a){g.AMap=b.failed;c(a)},e.appendChild(l)):c(\"\\u8bf7\\u586b\\u5199key\")}else if(g.AMap==b.loaded)if(a.key&&a.key!==d.key)c(\"\\u591a\\u4e2a\\u4e0d\\u4e00\\u81f4\\u7684 key\");else if(a.version&&\na.version!==d.AMap.version)c(\"\\u4e0d\\u5141\\u8bb8\\u591a\\u4e2a\\u7248\\u672c JSAPI \\u6df7\\u7528\");else{f=[];if(a.plugins)for(e=0;e<a.plugins.length;e+=1)-1==d.AMap.plugins.indexOf(a.plugins[e])&&f.push(a.plugins[e]);if(f.length)window.AMap.plugin(f,function(){m(a).then(function(){h(window.AMap)})[\"catch\"](c)});else m(a).then(function(){h(window.AMap)})[\"catch\"](c)}else if(a.key&&a.key!==d.key)c(\"\\u591a\\u4e2a\\u4e0d\\u4e00\\u81f4\\u7684 key\");else if(a.version&&a.version!==d.AMap.version)c(\"\\u4e0d\\u5141\\u8bb8\\u591a\\u4e2a\\u7248\\u672c JSAPI \\u6df7\\u7528\");\nelse{var k=[];if(a.plugins)for(e=0;e<a.plugins.length;e+=1)-1==d.AMap.plugins.indexOf(a.plugins[e])&&k.push(a.plugins[e]);t(function(){if(k.length)window.AMap.plugin(k,function(){m(a).then(function(){h(window.AMap)})[\"catch\"](c)});else m(a).then(function(){h(window.AMap)})[\"catch\"](c)})}})},reset:function(){delete window.AMap;delete window.AMapUI;delete window.Loca;d={key:\"\",AMap:{version:\"1.4.15\",plugins:[]},AMapUI:{version:\"1.1\",plugins:[]},Loca:{version:\"1.3.2\"}};g={AMap:b.notload,AMapUI:b.notload,\nLoca:b.notload};n={AMap:[],AMapUI:[],Loca:[]}}}})\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"add-edit-container\"},[_c('el-button',{on:{\"click\":_vm.exportAsImage}},[_vm._v(\"导出\")]),_c('div',{staticClass:\"tool-bar\"},[_c('el-select',{attrs:{\"filterable\":\"\",\"remote\":\"\",\"reserve-keyword\":\"\",\"clearable\":\"\",\"size\":\"small\",\"disabled\":_vm.readonly,\"placeholder\":\"请输入关键字搜索\",\"remote-method\":_vm.remoteMethod},on:{\"change\":_vm.handleChangeSelect},model:{value:(_vm.formData.locationName),callback:function ($$v) {_vm.$set(_vm.formData, \"locationName\", $$v)},expression:\"formData.locationName\"}},_vm._l((_vm.suggestions),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.name,\"value\":item.id}})}),1)],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isShowMap),expression:\"isShowMap\"}],staticStyle:{\"width\":\"100%\",\"height\":\"100%\"},attrs:{\"id\":\"map-container\"}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"add-edit-container\">\n    <el-button @click=\"exportAsImage\">导出</el-button>\n    <div class=\"tool-bar\">\n      <el-select\n          v-model=\"formData.locationName\"\n          filterable\n          remote\n          reserve-keyword\n          clearable\n          size=\"small\"\n          :disabled=\"readonly\"\n          placeholder=\"请输入关键字搜索\"\n          :remote-method=\"remoteMethod\"\n          @change=\"handleChangeSelect\"\n      >\n        <el-option\n            v-for=\"item in suggestions\"\n            :key=\"item.id\"\n            :label=\"item.name\"\n            :value=\"item.id\">\n        </el-option>\n      </el-select>\n    </div>\n    <div id=\"map-container\" v-show=\"isShowMap\" style=\"width: 100%; height: 100%;\"></div>\n  </div>\n</template>\n<script>\n\nimport AMapLoader from '@amap/amap-jsapi-loader';\n// import markerUrl from '@/common/images/marker.png';\nimport { mk } from '@/common/js/mk';\nimport html2canvas from 'html2canvas';\n\nwindow._AMapSecurityConfig = {\n  securityJsCode: mk.s\n};\nlet AMap;\nlet mapInstance;\nlet autoComplete;\nlet mouseTool;\nexport default {\n  name: 'AddEdit',\n  components: {\n  },\n  data () {\n    return { // 地\n      type: '',\n      params: '',\n      keyword: '',\n      currentPolygon: null,\n      readonly: false,\n      showDialog: false,\n      isShowMap: true,\n      formData: {\n        time: null,\n        locationName: '',\n        objectIds: []\n      },\n      suggestions: [],\n      mapCenter: [113.264499, 23.130061]\n    };\n  },\n  watch: {\n  },\n  async mounted () {\n    await this.initAMap();\n  },\n  methods: {\n    initAMap () {\n      AMapLoader.load({\n        key: mk.k, // 申请好的Web端开发者Key，首次调用 load 时必填\n        version: '2.0', // 指定要加载的 JSAPI 的版本，缺省时默认为 1.4.15\n        plugins: [\n          'AMap.Scale',\n          'AMap.AutoComplete',\n          'AMap.PlaceSearch',\n          'AMap.ToolBar',\n          'AMap.ControlBar',\n          'AMap.PolygonEditor',\n          'AMap.MouseTool',\n          'AMap.MapExport'\n        ] // 需要使用的的插件列表，如比例尺'AMap.Scale'等\n      })\n        .then((GDMap) => {\n          AMap = GDMap;\n          mapInstance = new AMap.Map('map-container', {\n            // renderer: 'canvas', // 强制 Canvas 渲染\n            // 设置地图容器id\n            resizeEnable: true,\n            expandZoomRange: true,\n            viewMode: '3D', // 是否为3D地图模式\n            zoom: 15, // 初始化地图级别\n            center: this.mapCenter, // 初始化地图中心点位置\n            WebGLParams: {\n              preserveDrawingBuffer: true\n            }\n          });\n          // mapInstance.addControl(new AMap.Scale()); // 比例尺\n          // mapInstance.addControl(new AMap.ToolBar()); // 缩放工具条\n          // mapInstance.addControl(new AMap.ToolBar()); // 缩放工具条\n          // mapInstance.addControl(new AMap.ControlBar({\n          //   position: 'RB', // 右下角定位\n          //   offset: new AMap.Pixel(20, 60), // 像素级微调\n          //   showAngle: true // 显示旋转角度\n          // })); // 控制罗盘\n          const autoOptions = {\n          // city 限定城市，默认全国\n            city: '全国'\n          };\n          // mouseTool = new AMap.MouseTool(mapInstance);\n          // console.log(mouseTool);\n          // 实例化AutoComplete\n          autoComplete = new AMap.AutoComplete(autoOptions);\n          console.log('加载完成');\n          this.addMarker(this.mapCenter);\n        // this.getInfo(item);\n        })\n        .catch((e) => {\n          console.log(e);\n        });\n    },\n    // 使用高德原生导出（推荐）\n    // const exportAsImage = () => {\n    //   if (!map.value) return;\n    //   map.value.plugin([\"AMap.MapExport\"], () => {\n    //     map.value.exportMapAsPNG({\n    //       download: true,\n    //       filename: 'map-screenshot.png'\n    //     });\n    //   });\n    // };\n    exportAsImage () {\n      console.log('mapInstance', mapInstance);\n      mapInstance.getScreenShot();\n      console.log('mapInstance.getScreenShot()', mapInstance.getScreenShot());\n      // map.value.plugin([\"AMap.MapExport\"], () => {\n      //   map.value.exportMapAsPNG({\n      //     download: true,\n      //     filename: 'map-screenshot.png'\n      //   });\n      // });\n      // mapInstance.exportMapAsPNG({\n      //   download: true,\n      //   filename: 'map-screenshot.png'\n      // });\n      setTimeout(() => {\n        html2canvas(document.getElementById('map-container'), {\n          useCORS: true, // 允许跨域资源加载\n          logging: true, // 开启控制台日志（调试用）\n          scale: 1 // 提高清晰度（可调整）\n        }).then(canvas => {\n          const link = document.createElement('a');\n          link.download = 'map.jpg';\n          link.href = canvas.toDataURL();\n          link.click();\n        });\n      }, 500);\n    },\n\n    // exportDataAsJSON () {\n    //   const data = {\n    //     markers: markers.value.map(m => m.getPosition()),\n    //     paths: paths.value\n    //   };\n    //   const blob = new Blob([JSON.stringify(data)], { type: 'application/json' });\n    //   const link = document.createElement('a');\n    //   link.download = 'map-data.json';\n    //   link.href = URL.createObjectURL(blob);\n    //   link.click();\n    // },\n    resetMap (position) {\n      this.clearResources(); // 清理旧资源\n      mapInstance.setCenter(position);\n      this.addMarker(position);\n\n      this.activateDrawing();\n    },\n    // 获取最终围栏坐标\n    handlePolygonUpdate (e) {\n      console.log(111111);\n      const paths = this.currentPolygon.getPath();\n      console.log('电子围栏坐标:', paths);\n    },\n    // 清理资源\n    clearResources () {\n      if (this.currentMarker) {\n        mapInstance.remove(this.currentMarker);\n        this.currentMarker = null;\n      }\n      if (this.currentPolygon) {\n        mapInstance.remove(this.currentPolygon);\n        this.currentPolygon.close();\n        this.currentPolygon = null;\n      }\n      if (this.polygonEditor) {\n        this.polygonEditor.close();\n        this.polygonEditor = null;\n      }\n    },\n\n    /**\n     * @Description 选择地点时触发\n     * @author wangkangzhang\n     * @date 2024/9/26\n     */\n    handleChangeSelect (id) {\n      const result = this.suggestions.find(value => value.id === id);\n      if (result) {\n        this.handleSelect(result);\n      }\n    },\n    handleSelect (item) {\n      const { location, name } = item;\n      console.log(name);\n      this.resetMap(location);\n    },\n    /**\n     * @Description 重置中心点\n     * @author wangkangzhang\n     * @date 2024/9/26\n     */\n    setMapCenter (position) {\n      if (mapInstance) {\n        mapInstance.setCenter(position);\n      }\n    },\n    // 添加标记点\n    addMarker (position) {\n      this.currentMarker = new AMap.Marker({\n        position: position,\n        icon: 'https://webapi.amap.com/theme/v1.3/markers/n/mark_b.png'\n      });\n      mapInstance.add(this.currentMarker);\n    },\n\n    activateDrawing () {\n    // 创建新多边形并加入地图\n      mouseTool.polygon({\n        strokeColor: '#1791fc',\n        strokeOpacity: 0.5,\n        strokeWeight: 6,\n        fillColor: '#1791fc',\n        fillOpacity: 0.4,\n        strokeStyle: 'solid'\n      });\n      mouseTool.on('draw', (event) => {\n      // event.obj 为绘制出来的覆盖物对象\n        console.log('event', event);\n\n        const getPath = event.obj.getPath();\n        console.log('getPath', getPath);\n        this.currentPolygon = new AMap.Polygon({\n          path: getPath,\n          strokeColor: 'green',\n          strokeWeight: 6,\n          strokeOpacity: 0.2,\n          fillOpacity: 0.4,\n          fillColor: '#1791fc',\n          zIndex: 50,\n          bubble: true\n\n        });\n        mapInstance.add(this.currentPolygon);\n        this.fn();\n      });\n    // mouseTool.on('draw', this.handlePolygonUpdate);\n    // 延迟初始化编辑器（关键修复）\n    },\n    remoteMethod (query) {\n      if (this._timer) {\n        clearTimeout(this._timer);\n      }\n      this._timer = setTimeout(() => {\n        if (query) {\n          this.getSuggestions(query);\n        }\n        this._timer = null;\n      }, 500);\n    },\n    getSuggestions (keyword) {\n      if (autoComplete) {\n        autoComplete.search(keyword, (status, result) => {\n          const { info = '', tips = [] } = result || {};\n          // 搜索成功时，result 即是对应的匹配数据\n          if (info === 'OK') {\n            this.suggestions = tips;\n          }\n        });\n      }\n    }\n  },\n  beforeDestroy () {\n    if (mapInstance) {\n      mapInstance.destroy();\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.add-edit-container {\n  width: 100%;\n  height: 100%;\n  position: relative;\n  .tool-bar {\n    width: 320px;\n    height: 42px;\n    background: #ffffff;\n    position: absolute;\n    top: 32px;\n    left: 32px;\n    z-index: 200;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    padding: 5px;\n    box-sizing: border-box;\n    border-radius: 8px;\n    .el-select {\n      width: 100%;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index3.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index3.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./index3.vue?vue&type=template&id=4ee82b31&scoped=true\"\nimport script from \"./index3.vue?vue&type=script&lang=js\"\nexport * from \"./index3.vue?vue&type=script&lang=js\"\nimport style0 from \"./index3.vue?vue&type=style&index=0&id=4ee82b31&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4ee82b31\",\n  null\n  \n)\n\nexport default component.exports","export const mk = {\n  k: '893473ecc9aabccee4b41209a43b1394',\n  s: 'b6d7ec59571b092b7a68d8c1cf93acec'\n};\n"],"names":["m","p","module","exports","this","a","b","AMapUI","push","Loca","r","Promise","all","h","c","f","plugins","e","length","d","indexOf","g","failed","notload","loading","version","l","document","body","head","k","createElement","type","src","onerror","onload","loaded","window","loadUI","split","slice","arguments","n","splice","appendChild","AMap","startsWith","key","Error","q","t","load","location","host","___onAPILoaded","then","join","plugin","reset","render","_vm","_c","_self","staticClass","on","exportAsImage","_v","attrs","readonly","remoteMethod","handleChangeSelect","model","value","formData","locationName","callback","$$v","$set","expression","_l","suggestions","item","id","name","directives","rawName","isShowMap","staticStyle","staticRenderFns","mapInstance","autoComplete","mouseTool","_AMapSecurityConfig","securityJsCode","mk","s","components","data","params","keyword","currentPolygon","showDialog","time","objectIds","mapCenter","watch","mounted","initAMap","methods","AMapLoader","GDMap","Map","resizeEnable","expandZoomRange","viewMode","zoom","center","WebGLParams","preserveDrawingBuffer","autoOptions","city","AutoComplete","console","log","addMarker","catch","getScreenShot","setTimeout","html2canvas","getElementById","useCORS","logging","scale","canvas","link","download","href","toDataURL","click","resetMap","position","clearResources","setCenter","activateDrawing","handlePolygonUpdate","paths","getPath","currentMarker","remove","close","polygonEditor","result","find","handleSelect","setMapCenter","Marker","icon","add","polygon","strokeColor","strokeOpacity","strokeWeight","fillColor","fillOpacity","strokeStyle","event","obj","Polygon","path","zIndex","bubble","fn","query","_timer","clearTimeout","getSuggestions","search","status","info","tips","beforeDestroy","destroy","component"],"sourceRoot":""}