{"version":3,"file":"js/658.5871f599.js","mappings":"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","sources":["webpack://yian/./src/views/base64/index.vue","webpack://yian/src/views/base64/index.vue","webpack://yian/./src/views/base64/index.vue?7f9b","webpack://yian/./src/views/base64/index.vue?c397"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"container\",attrs:{\"id\":\"container\"}},[_c('div',{staticClass:\"tool-box\"},[_c('el-select',{attrs:{\"size\":\"small\",\"filterable\":\"\",\"placeholder\":\"请选择\"},model:{value:(_vm.type),callback:function ($$v) {_vm.type=$$v},expression:\"type\"}},_vm._l((_vm.list),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1),(_vm.type ==='图片转base64')?[_c('input',{ref:\"uploadBtn\",staticStyle:{\"display\":\"none\"},attrs:{\"type\":\"file\",\"accept\":\".png,.jpeg,.jpg\"},on:{\"change\":_vm.onFileChange}}),_c('el-button',{staticClass:\"btn\",attrs:{\"size\":\"small\"},on:{\"click\":_vm.handleUpload}},[_vm._v(\"选择文件\")]),(_vm.file)?_c('span',{staticStyle:{\"margin-left\":\"10px\"}},[_vm._v(\"已选择的文件：\"+_vm._s(_vm.file.name))]):_vm._e()]:_vm._e(),_c('el-button',{staticClass:\"btn\",attrs:{\"size\":\"small\"},on:{\"click\":_vm.handleDownload}},[_vm._v(\"下载\")]),_c('el-button',{staticClass:\"btn\",attrs:{\"size\":\"small\"},on:{\"click\":_vm.handleCopyResult}},[_vm._v(\"拷贝\")]),_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":_vm.exportAsImage}},[_vm._v(\"截图\")])],2),(_vm.type ==='图片转base64')?_c('div',{staticClass:\"img-to-base64-container\"},[_vm._v(\" \"+_vm._s(_vm.resultValue)+\" \")]):_c('div',{staticClass:\"base64-to-img-container\"},[_c('div',{},[_c('el-input',{attrs:{\"type\":\"textarea\"},on:{\"input\":_vm.resultValueChange},model:{value:(_vm.resultValue),callback:function ($$v) {_vm.resultValue=$$v},expression:\"resultValue\"}})],1),_c('div',{},[_c('img',{attrs:{\"src\":_vm.resultValue,\"alt\":\"\"}})])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n<template>\n<div class=\"container\" id=\"container\">\n  <div class=\"tool-box\">\n    <el-select size=\"small\" filterable v-model=\"type\" placeholder=\"请选择\">\n      <el-option\n          v-for=\"item in list\"\n          :key=\"item.value\"\n          :label=\"item.label\"\n          :value=\"item.value\">\n      </el-option>\n    </el-select>\n    <template v-if=\"type ==='图片转base64'\">\n      <input style=\"display: none\" type=\"file\" ref=\"uploadBtn\" accept=\".png,.jpeg,.jpg\"  @change=\"onFileChange\">\n      <el-button class=\"btn\" size=\"small\" @click=\"handleUpload\">选择文件</el-button>\n      <span style=\"margin-left: 10px\" v-if=\"file\">已选择的文件：{{file.name}}</span>\n    </template>\n    <el-button class=\"btn\" size=\"small\" @click=\"handleDownload\">下载</el-button>\n    <el-button class=\"btn\" size=\"small\" @click=\"handleCopyResult\">拷贝</el-button>\n\n    <el-button  size=\"small\" @click=\"exportAsImage\">截图</el-button>\n  </div>\n  <div class=\"img-to-base64-container\" v-if=\"type ==='图片转base64'\">\n    {{resultValue}}\n  </div>\n<!--  data:image/png;base64,-->\n  <div class=\"base64-to-img-container\" v-else>\n    <div class=\"\">\n      <el-input type=\"textarea\" v-model=\"resultValue\" @input=\"resultValueChange\"></el-input>\n    </div>\n    <div class=\"\">\n      <img :src=\"resultValue\" alt=\"\">\n    </div>\n  </div>\n</div>\n</template>\n<script>\nimport { getStr } from '@/utils/util';\nimport html2canvas from 'html2canvas';\n\nexport default {\n  components: {},\n  data () {\n    return {\n      file: null,\n      resultValue: '',\n      fileName: '',\n      type: '图片转base64',\n      url: '',\n      fileType: ['image/jpeg', 'image/jpg', 'image/png'],\n      list: [\n        {\n          label: 'base64转图片',\n          value: 'base64转图片'\n        },\n        {\n          label: '图片转base64',\n          value: '图片转base64'\n        }\n      ]\n    };\n  },\n  props: {},\n  computed: {},\n  watch: {},\n  created () {},\n  mounted () {},\n  methods: {\n\n    exportAsImage () {\n      setTimeout(() => {\n        html2canvas(document.getElementById('container'), {\n          useCORS: true, // 允许跨域资源加载\n          logging: true, // 开启控制台日志（调试用）\n          scale: 1 // 提高清晰度（可调整）\n        }).then(canvas => {\n          const link = document.createElement('a');\n          link.download = 'map.jpg';\n          link.href = canvas.toDataURL();\n          link.click();\n        });\n      }, 500);\n    },\n    resultValueChange () {\n      this.url = this.resultValue;\n    },\n    /**\n     * @Description\n     * @author qianyinggenian\n     * @date  2024/7/24\n     */\n    handleUpload () {\n      this.$refs.uploadBtn.value = '';\n      this.$refs.uploadBtn.click();\n    },\n    /**\n     * @Description 选择文件后触发\n     * @author qianyinggenian\n     * @date  2024/7/24\n     */\n    async onFileChange (event) {\n      const file = event.target.files[0];\n      this.file = file;\n      this.fileName = getStr(this.file.name, '.').startStr;\n      if (!file || !this.fileType.includes(file.type)) {\n        this.$message.error('请选择一个图片文件！');\n        return;\n      }\n      // 使用FileReader读取文件\n      const reader = new FileReader();\n\n      // 定义读取完成的回调函数\n      reader.onload = (e) => {\n        // 获取Base64编码的数据\n        this.resultValue = e.target.result;\n      };\n\n      // 读取文件为DataURL，即Base64编码\n      reader.readAsDataURL(this.file);\n    },\n    /**\n     * @Description 下载\n     * @author qianyinggenian\n     * @date 2024/7/24\n     */\n    handleDownload () {\n      if (this.resultValue) {\n        const blob = new Blob([this.resultValue], { type: 'text/plain' });\n        const downloadElement = document.createElement('a');\n        const href = window.URL.createObjectURL(blob); // 创建下载的链接\n        downloadElement.href = href;\n        downloadElement.download = `${this.fileName}-base64.txt`; // 下载后文件名\n        document.body.appendChild(downloadElement);\n        downloadElement.click(); // 点击下载\n        document.body.removeChild(downloadElement); // 下载完成移除元素\n        window.URL.revokeObjectURL(href); // 释放掉blob对象\n      } else {\n        this.$message.error('内容为空，不可保存');\n      }\n    },\n    /**\n     * @Description 拷贝\n     * @author qianyinggenian\n     * @date 2024/7/24\n     */\n    handleCopyResult () {\n      if (!this.resultValue) {\n        this.$message.error('请先上传文件再拷贝');\n        return false;\n      }\n      if (navigator.clipboard && typeof navigator.clipboard.writeText === 'function') {\n        navigator.clipboard.writeText(this.resultValue).then(() => {\n          this.$message.success('复制成功');\n        });\n      } else {\n        const textarea = document.createElement('textarea');\n        textarea.value = this.resultValue;\n        document.body.appendChild(textarea);\n        textarea.select();\n        try {\n          // 尝试执行复制操作\n          const success = document.execCommand('copy');\n          if (success) {\n            this.$message.success('复制成功');\n          } else {\n            this.$message.error('复制失败');\n          }\n        } catch (error) {\n          this.$message.error('复制失败:', error);\n        }\n        document.body.removeChild(textarea);\n      }\n    }\n  }\n};\n</script>\n<style scoped lang=\"scss\">\n.container {\n  height: 100%;\n  width: 100%;\n  padding: 10px;\n  box-sizing: border-box;\n  .tool-box {\n    .tips {\n      margin-bottom: 10px;\n    }\n  }\n  .btn {\n    width: 80px;\n    letter-spacing: 2px;\n    margin-left: 20px;\n  }\n  .img-to-base64-container {\n    width: 100%;\n    margin-top: 10px;\n    height: calc(100% - 65px - 10px);\n    border: 1px solid red;\n    overflow-y: auto;\n    padding: 10px;\n    box-sizing: border-box;\n    overflow-wrap: break-word; /* 当文本过长时允许换行 */\n  }\n  .base64-to-img-container {\n    width: 100%;\n    margin-top: 10px;\n    height: calc(100% - 65px - 10px);\n    border: 1px solid red;\n    overflow-y: auto;\n    padding: 10px;\n    box-sizing: border-box;\n    display: flex;\n    > div {\n      flex: 1;\n      flex-shrink: 0;\n      padding: 10px;\n      box-sizing: border-box;\n      :deep(.el-textarea) {\n        height: 100%;\n        .el-textarea__inner {\n          height: 100%;\n        }\n      }\n      margin-right: 10px;\n      img {\n        border-radius: 4px;\n      }\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=fd746c88&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=fd746c88&prod&scoped=true&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"fd746c88\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","attrs","model","value","type","callback","$$v","expression","_l","list","item","key","label","ref","staticStyle","on","onFileChange","handleUpload","_v","file","_s","name","_e","handleDownload","handleCopyResult","exportAsImage","resultValue","resultValueChange","staticRenderFns","components","data","fileName","url","fileType","props","computed","watch","created","mounted","methods","setTimeout","html2canvas","document","getElementById","useCORS","logging","scale","then","canvas","link","createElement","download","href","toDataURL","click","$refs","uploadBtn","event","target","files","getStr","startStr","includes","$message","error","reader","FileReader","onload","e","result","readAsDataURL","blob","Blob","downloadElement","window","URL","createObjectURL","body","appendChild","removeChild","revokeObjectURL","navigator","clipboard","writeText","success","textarea","select","execCommand","component"],"sourceRoot":""}