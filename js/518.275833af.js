"use strict";(self["webpackChunkyian"]=self["webpackChunkyian"]||[]).push([[518],{24518:function(e,t,n){n.r(t),n.d(t,{default:function(){return c}});var l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[t("el-select",{attrs:{placeholder:"请选择"},on:{change:e.handleClear},model:{value:e.typeValue,callback:function(t){e.typeValue=t},expression:"typeValue"}},e._l(e.typeOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),t("div",{staticClass:"textarea-container"},[t("p",[t("span",[e._v(e._s(e.sourceObj[e.typeValue]))])]),t("el-input",{attrs:{type:"textarea",placeholder:"请输入内容"},model:{value:e.initialValue,callback:function(t){e.initialValue=t},expression:"initialValue"}})],1),t("div",{staticClass:"btns-box"},["txt"===e.typeValue?t("el-button",{attrs:{size:"small"},on:{click:e.handleFormatTXTToM3u8}},[e._v("格式转换")]):"m3u8"===e.typeValue?t("el-button",{attrs:{size:"small"},on:{click:e.handleFormatM3u8ToTXT}},[e._v("格式转换")]):"txt转json"===e.typeValue?t("el-button",{attrs:{size:"small"},on:{click:e.handleFormatTxtToJson}},[e._v("格式转换")]):"m3u8转json"===e.typeValue?t("el-button",{attrs:{size:"small"},on:{click:e.handleFormatM3u8ToJson}},[e._v("格式转换")]):e._e(),t("el-button",{attrs:{size:"small"},on:{click:e.handleClear}},[e._v("清空屏幕")]),t("el-button",{attrs:{size:"small"},on:{click:e.handleCopyResult}},[e._v("拷贝结果")]),t("el-button",{attrs:{size:"small"},on:{click:e.handleDownload}},[e._v("保存结果")]),t("el-dropdown",{attrs:{trigger:"click"},on:{command:e.downloadDemo},scopedSlots:e._u([{key:"dropdown",fn:function(){return[t("el-dropdown-menu",[t("el-dropdown-item",{attrs:{command:"templateTxt"}},[e._v("txt格式模板")]),t("el-dropdown-item",{attrs:{command:"templateM3u8"}},[e._v("m3u8模板")])],1)]},proxy:!0}])},[t("el-button",{attrs:{size:"small"}},[e._v("下载模板")])],1)],1),t("div",{staticClass:"textarea-container"},[t("p",[t("span",[e._v(e._s(e.resultObj[e.typeValue]))])]),t("el-input",{attrs:{type:"textarea",placeholder:"请输入内容"},model:{value:e.resultValue,callback:function(t){e.resultValue=t},expression:"resultValue"}})],1)],1)},i=[],a=(n(44114),n(14603),n(47566),n(98721),n(4901)),r={name:"index",components:{},data(){return{initialValue:"",resultValue:"",typeValue:"txt",ul:"",templateM3u8:"/yian/static/template/demo.m3u8",templateTxt:"/yian/static/template/demo.txt",sourceObj:{txt:"txt格式源",m3u8:"m3u8格式源","txt转json":"txt格式源","m3u8转json":"m3u8格式源"},resultObj:{txt:"m3u8格式转换结果",m3u8:"txt格式转换结果","txt转json":"json格式结果","m3u8转json":"json格式结果"},typeOptions:[{value:"txt",label:"txt转m3u8格式"},{value:"m3u8",label:"m3u8转txt格式"},{value:"txt转json",label:"txt转json格式"},{value:"m3u8转json",label:"m3u8转json格式"}]}},mounted(){},methods:{handleFormatM3u8ToTXT(){if(!this.initialValue)return this.$message.error("请先填写m3u8格式源"),!1;if(this.initialValue.includes("#genre#"))return this.$message.error("m3u8格式源错误"),!1;const e=this.initialValue.split("\n");let t=null,n=null,l=null,i="";for(const a of e){const e=a.trim();if(""!==e)if(e.includes("group-title")){const n=e.lastIndexOf('group-title="'),i=e.lastIndexOf('",');t=e.slice(n,i).replace(/group-title="/,"").trim(),l=e.slice(i,e.length).replace(/",/,"").trim()}else if(!e.includes("#EXTM3U")){let a=",#genre#",r="";n!==t?(n=t,a=`${t},#genre#`,r=`${a}\n${l},${e}`):r=`${l},${e}`,i+=`${r}\n`}}this.resultValue=i},handleFormatTXTToM3u8(){if(!this.initialValue)return this.$message.error("请先填写TXT格式源"),!1;if(this.initialValue.includes("#EXTINF")||this.initialValue.includes("#EXTM3U"))return this.$message.error("TXT格式源错误"),!1;const e=this.initialValue.split("\n");let t='#EXTM3U x-tvg-url="https://live.fanmingming.com/e.xml"\n',n=null;for(const l of e){const e=l.trim();if(""!==e)if(e.includes("#genre#"))n=e.replace(/,#genre#/,"").trim();else{const[l,i]=e.split(",").map((e=>e.trim())),a=l.replace(/(CCTV|CETV)-(\d+).*/,"$1$2");t+=`#EXTINF:-1 tvg-name="${a}" tvg-logo="https://live.fanmingming.com/tv/${a}.png"`,n&&(t+=` group-title="${n}"`),t+=`,${l}\n${i}\n`}}this.resultValue=t},handleFormatTxtToJson(){if(!this.initialValue)return this.$message.error("请先填写TXT格式源"),!1;if(this.initialValue.includes("#EXTINF")||this.initialValue.includes("#EXTM3U"))return this.$message.error("TXT格式源错误"),!1;const e=this.initialValue.split("\n"),t=[];for(const n of e){const e=n.trim();if(""!==e&&!e.includes("#genre#")){const[n,l]=e.split(",").map((e=>e.trim())),i=t.findIndex((e=>e.text===n));if(-1===i){const e={text:n,children:[{text:"源1",id:(0,a.$n)(),url:l}]};t.push(e)}else{const e=t[i].children.length,n={text:`源${e+1}`,id:(0,a.$n)(),url:l},r=t[i].children.findIndex((e=>e.url===l));-1===r&&t[i].children.push(n)}}}this.resultValue=JSON.stringify(t,"",2)},handleFormatM3u8ToJson(){if(!this.initialValue)return this.$message.error("请先填写m3u8格式源"),!1;if(this.initialValue.includes("#genre#"))return this.$message.error("m3u8格式源错误"),!1;const e=this.initialValue.split("\n");let t=null;const n=[];for(const l of e){const e=l.trim();if(""!==e)if(e.includes("group-title")){const n=e.lastIndexOf('",');t=e.slice(n,e.length).replace(/",/,"").trim()}else if(!e.includes("#EXTM3U")&&!e.includes("#EXTINF")){const l=n.findIndex((e=>e.text===t));if(-1===l){const l={text:t,children:[{text:"源1",id:(0,a.$n)(),url:e}]};n.push(l)}else{const t=n[l].children.length,i={text:`源${t+1}`,id:(0,a.$n)(),url:e},r=n[l].children.findIndex((t=>t.url===e));-1===r&&n[l].children.push(i)}}}this.resultValue=JSON.stringify(n,"",2)},handleClear(){this.initialValue="",this.resultValue=""},handleCopyResult(){if(!this.resultValue)return this.$message.error("请先转换再拷贝"),!1;navigator.clipboard.writeText(this.resultValue).then((()=>{this.$message.success("复制成功")}))},handleDownload(){if(this.resultValue){const e=new Blob([this.resultValue],{type:"text/plain"}),t=document.createElement("a"),n=window.URL.createObjectURL(e);t.href=n;const l="txt"===this.typeValue?"m3u":"txt";t.download=`playlist.${l}`,document.body.appendChild(t),t.click(),document.body.removeChild(t),window.URL.revokeObjectURL(n)}else this.$message.error("内容为空，不可保存")},downloadDemo(e){console.log("command",e);const t=document.createElement("a");if(t.setAttribute("download",""),t.setAttribute("href",this[e]),document.all)t.click();else{const e=document.createEvent("MouseEvents");e.initEvent("click",!0,!0),t.dispatchEvent(e)}}}},s=r,o=n(81656),u=(0,o.A)(s,l,i,!1,null,"be4e4b1a",null),c=u.exports},4901:function(e,t,n){n.d(t,{$n:function(){return i},jL:function(){return l}});n(44114),n(14603),n(47566),n(98721);function l(e,t,n="creatDate"){return Date.parse(t[n])-Date.parse(e[n])}function i(){let e=(new Date).getTime();const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(t=>{const n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)}));return t}},36955:function(e,t,n){var l=n(92140),i=n(94901),a=n(44576),r=n(78227),s=r("toStringTag"),o=Object,u="Arguments"===a(function(){return arguments}()),c=function(e,t){try{return e[t]}catch(n){}};e.exports=l?a:function(e){var t,n,l;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=c(t=o(e),s))?n:u?a(t):"Object"===(l=a(t))&&i(t.callee)?"Arguments":l}},62106:function(e,t,n){var l=n(50283),i=n(24913);e.exports=function(e,t,n){return n.get&&l(n.get,t,{getter:!0}),n.set&&l(n.set,t,{setter:!0}),i.f(e,t,n)}},92140:function(e,t,n){var l=n(78227),i=l("toStringTag"),a={};a[i]="z",e.exports="[object z]"===String(a)},655:function(e,t,n){var l=n(36955),i=String;e.exports=function(e){if("Symbol"===l(e))throw new TypeError("Cannot convert a Symbol value to a string");return i(e)}},22812:function(e){var t=TypeError;e.exports=function(e,n){if(e<n)throw new t("Not enough arguments");return e}},14603:function(e,t,n){var l=n(36840),i=n(79504),a=n(655),r=n(22812),s=URLSearchParams,o=s.prototype,u=i(o.append),c=i(o["delete"]),d=i(o.forEach),m=i([].push),h=new s("a=1&a=2&b=3");h["delete"]("a",1),h["delete"]("b",void 0),h+""!=="a=2"&&l(o,"delete",(function(e){var t=arguments.length,n=t<2?void 0:arguments[1];if(t&&void 0===n)return c(this,e);var l=[];d(this,(function(e,t){m(l,{key:t,value:e})})),r(t,1);var i,s=a(e),o=a(n),h=0,p=0,f=!1,x=l.length;while(h<x)i=l[h++],f||i.key===s?(f=!0,c(this,i.key)):p++;while(p<x)i=l[p++],i.key===s&&i.value===o||u(this,i.key,i.value)}),{enumerable:!0,unsafe:!0})},47566:function(e,t,n){var l=n(36840),i=n(79504),a=n(655),r=n(22812),s=URLSearchParams,o=s.prototype,u=i(o.getAll),c=i(o.has),d=new s("a=1");!d.has("a",2)&&d.has("a",void 0)||l(o,"has",(function(e){var t=arguments.length,n=t<2?void 0:arguments[1];if(t&&void 0===n)return c(this,e);var l=u(this,e);r(t,1);var i=a(n),s=0;while(s<l.length)if(l[s++]===i)return!0;return!1}),{enumerable:!0,unsafe:!0})},98721:function(e,t,n){var l=n(43724),i=n(79504),a=n(62106),r=URLSearchParams.prototype,s=i(r.forEach);l&&!("size"in r)&&a(r,"size",{get:function(){var e=0;return s(this,(function(){e++})),e},configurable:!0,enumerable:!0})}}]);
//# sourceMappingURL=518.275833af.js.map