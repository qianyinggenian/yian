"use strict";(self["webpackChunkyian"]=self["webpackChunkyian"]||[]).push([[255],{1255:function(t,e,r){r.r(e),r.d(e,{default:function(){return p}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"waterMakerInfo"},[e("div",{staticClass:"content"},[e("div",{staticClass:"statement"},[t._v("责任声明：本功能不存储数据，仅用于学习研究，请勿用于商业用途，如用于其他用途造成的法律后果，由使用人自行承担。使用本功能，即认为你同意本责任声明。")]),t._m(0),e("div",{staticClass:"tool-bar"},[e("div",{staticClass:"file"},[e("div",{staticClass:"item"},[e("div",{staticClass:"label"},[t._v("请选择文件：")]),e("div",{staticClass:"value"},[e("input",{attrs:{id:"file",accept:"",type:"file"},on:{change:t.handleChangeFile}})])])]),e("div",{staticClass:"font-style"},[e("div",{staticClass:"item"},[e("div",{staticClass:"label",on:{click:t.handleClick}},[t._v("水印文字：")]),t._l(t.watermarkObj.textArray,(function(r,a){return e("div",{key:a,staticClass:"value text"},[e("el-input",{attrs:{size:"small",clearable:"",title:r.text,placeholder:`请输入水印${a+1}内容`},on:{change:t.resetWatermark},model:{value:r.text,callback:function(e){t.$set(r,"text",e)},expression:"item.text"}})],1)})),e("div",[e("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.handleAdd}},[e("i",{staticClass:"el-icon-plus",staticStyle:{"font-size":"16px",color:"red"}}),t._v(" 新增 ")])],1)],2)]),e("div",{staticClass:"font-style"},[e("div",{staticClass:"item"},[e("div",{staticClass:"label"},[t._v("字体大小：")]),e("div",{staticClass:"value"},[e("el-select",{attrs:{size:"small",clearable:"",filterable:"",placeholder:"请选择"},on:{change:t.resetWatermark},model:{value:t.watermarkObj.fontSize,callback:function(e){t.$set(t.watermarkObj,"fontSize",e)},expression:"watermarkObj.fontSize"}},t._l(t.fontSizeList,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)]),e("div",{staticClass:"item"},[e("div",{staticClass:"label"},[t._v("字体：")]),e("div",{staticClass:"value"},[e("el-select",{attrs:{size:"small",clearable:"",filterable:"",placeholder:"请选择"},on:{change:t.resetWatermark},model:{value:t.watermarkObj.fontFamily,callback:function(e){t.$set(t.watermarkObj,"fontFamily",e)},expression:"watermarkObj.fontFamily"}},t._l(t.fontFamilyList,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)]),e("div",{staticClass:"item"},[e("div",{staticClass:"label"},[t._v("字体颜色：")]),e("div",{staticClass:"value"},[e("el-color-picker",{attrs:{size:"small"},on:{change:t.resetWatermark},model:{value:t.watermarkObj.fontcolor,callback:function(e){t.$set(t.watermarkObj,"fontcolor",e)},expression:"watermarkObj.fontcolor"}})],1)])]),e("div",{staticClass:"layout"},[e("div",{staticClass:"item"},[e("div",{staticClass:"label"},[t._v("方向：")]),e("div",{staticClass:"value"},[e("el-slider",{attrs:{min:-180,max:180},on:{change:t.resetWatermark},model:{value:t.watermarkObj.rotate,callback:function(e){t.$set(t.watermarkObj,"rotate",e)},expression:"watermarkObj.rotate"}})],1),e("div",{staticClass:"value1"},[t._v(t._s(t.watermarkObj.rotate)+"°")])]),e("div",{staticClass:"item"},[e("div",{staticClass:"label"},[t._v("透明度：")]),e("div",{staticClass:"value"},[e("el-slider",{on:{change:t.resetWatermark},model:{value:t.watermarkObj.opacity,callback:function(e){t.$set(t.watermarkObj,"opacity",e)},expression:"watermarkObj.opacity"}})],1),e("div",{staticClass:"value1"},[t._v(t._s(t.watermarkObj.opacity)+"%")])]),e("div",{staticClass:"item"},[e("div",{staticClass:"label"},[t._v("稠密度：")]),e("div",{staticClass:"value"},[e("el-slider",{attrs:{step:.1,min:.1,max:6},on:{change:t.resetWatermark},model:{value:t.watermarkObj.density,callback:function(e){t.$set(t.watermarkObj,"density",e)},expression:"watermarkObj.density"}})],1),e("div",{staticClass:"value1"},[t._v(t._s(t.watermarkObj.density))])]),t._e()])]),t.fileUrl?e("div",{staticClass:"imageBox",attrs:{id:"imageBox"}}):t._e(),e("div",{staticClass:"download-btn"},[e("el-button",{staticStyle:{"margin-top":"10px",width:"80px"},attrs:{type:"primary"},on:{click:t.downFile}},[t._v("下 载")])],1)])])},n=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"thanks"},[t._v("特别感谢："),e("a",{attrs:{href:"https://blog.csdn.net/qq_37831545/article/details/128846647",target:"_blank"}},[t._v("一朵野花压海棠")]),t._v(" 和 "),e("a",{attrs:{href:"https://blog.csdn.net/cuixiping/article/details/45932793",target:"_blank"}},[t._v("cuixiping")]),t._v(" 提供的分享 ")])}];r(44114),r(16573),r(78100),r(77936),r(18111),r(7588),r(61701),r(37467),r(44732),r(79577),r(64979),r(14603),r(47566),r(98721);async function i(t){const e=document.createElement("img");e.src=t,e.setAttribute("crossOrigin","anonymous"),await new Promise((t=>e.onload=t));const r=document.createElement("canvas");return r.width=e.width,r.height=e.height,r.getContext("2d").drawImage(e,0,0),r}async function o(){const t="myImageId";if(null!==document.getElementById(t)){const e=document.getElementsByClassName("imageBox")[0];e&&e.contains(document.getElementById(t))?e.removeChild(document.getElementById(t)):document.body.removeChild(document.getElementById(t))}}const s=({canvas:t,textArray:e,fontFamily:r="microsoft yahei",fontSize:a,fontcolor:n="#dadbdc",rotate:i=30,textAlign:o="left",density:s=2,opacity:l=50})=>{const c=t.getContext("2d"),u=t.width,f=t.height;c.font=`${a}px ${r}`,c.lineWidth=1,c.fillStyle=n,c.textAlign=o,c.textBaseline="middle",c.globalAlpha=l/100;const d=Math.max(u,f),v=Math.floor(d/s),y=[0];while(y[y.length-1]<d/2)y.push(y[y.length-1]+v);y.push(...y.slice(1,y.length).map((t=>-t)));for(let p=0;p<y.length;p++)for(let t=0;t<y.length;t++)c.save(),c.translate(u/2,f/2),c.rotate(Math.PI/120*-i),e.length>3&&(e=e.slice(0,3)),e.forEach(((e,r)=>{const n=a*r+2;c.fillText(e.text,y[p],y[t]+n)})),c.restore()};function l({canvas:t,maxWidth:e="100%",maxHeight:r="100%"}){var a=new Image;return a.src=t.toDataURL("image/png"),a.style.maxHeight=r,a.style.maxWidth=e,a.setAttribute("id","myImageId"),a}function c(t,e="下载"){const r=t.toDataURL("image/png"),a=u(r),n=document.createElement("a"),i=window.URL.createObjectURL(a);n.href=i,n.download=e,n.click(),window.URL.revokeObjectURL(i)}function u(t){var e=t.split(","),r=e[0].match(/:(.*?);/)[1],a=atob(e[1]),n=a.length,i=new Uint8Array(n);while(n--)i[n]=a.charCodeAt(n);return new Blob([i],{type:r})}var f={data(){return{fileUrl:"",fontFamilyList:[{value:"宋体",label:"宋体"},{value:"楷体",label:"楷体"},{value:"仿宋",label:"仿宋"},{value:"黑体",label:"黑体"},{value:"等线",label:"等线"},{value:"微软雅黑",label:"微软雅黑"},{value:"思源黑体",label:"思源黑体"},{value:"Times New Roman",label:"Times New Roman"},{value:"Helvetica Neue",label:"Helvetica Neue"},{value:"Helvetica",label:"Helvetica"},{value:"PingFang SC",label:"PingFang SC"},{value:"Hiragino Sans GB",label:"Hiragino Sans GB"},{value:"Microsoft YaHei",label:"Microsoft YaHei"},{value:"Arial",label:"Arial"},{value:"sans-serif",label:"sans-serif"}],fontSizeList:[],watermarkObj:{fontcolor:"#000000",fontSize:64,opacity:50,position:1,fontFamily:"仿宋",canvas:null,rotate:30,density:3,textAlign:"center",textArray:[{text:"水印内容"}]},watermarkParams:{}}},mounted(){for(let t=12;t<=128;t++){const e={value:t,label:`${t}px`};this.fontSizeList.push(e)}},methods:{handleChangeFile(t){const e=t.target.files[0];console.log("文件名:",e.name),console.log("文件类型:",e.type);const r=new FileReader;r.onloadend=()=>{this.fileUrl=r.result,this.drawWaterMarkFn()},r.readAsDataURL(e)},resetWatermark(){this.fileUrl&&this.drawWaterMarkFn()},handleClick(){console.log(this.watermarkObj.textArray)},handleAdd(){const{textArray:t}=this.watermarkObj;t&&t.length<3?this.watermarkObj.textArray.push({text:""}):this.$message.error("水印内容最多三行")},async drawWaterMarkFn(){o();const t=await i(this.fileUrl);this.watermarkObj.canvas=t,s(this.watermarkObj);const e=await l({canvas:t,maxWidth:"650px",maxHeight:"650px"});var r=document.getElementById("imageBox");r.appendChild(e)},async downFile(){if(this.fileUrl){const t=await i(this.fileUrl);this.watermarkObj.canvas=t,await s(this.watermarkObj),c(t,"水印图片下载")}else this.$message.error("请上传图片后再下载")}}},d=f,v=r(81656),y=(0,v.A)(d,a,n,!1,null,"7da96d09",null),p=y.exports},1548:function(t,e,r){var a=r(44576),n=r(79039),i=r(39519),o=r(6596),s=a.structuredClone;t.exports=!!s&&!n((function(){if("DENO"===o&&i>92||"NODE"===o&&i>94||"BROWSER"===o&&i>97)return!1;var t=new ArrayBuffer(8),e=s(t,{transfer:[t]});return 0!==t.byteLength||8!==e.byteLength}))},3238:function(t,e,r){var a=r(44576),n=r(77811),i=r(67394),o=a.DataView;t.exports=function(t){if(!n||0!==i(t))return!1;try{return new o(t),!1}catch(e){return!0}}},6596:function(t,e,r){var a=r(44576),n=r(82839),i=r(22195),o=function(t){return n.slice(0,t.length)===t};t.exports=function(){return o("Bun/")?"BUN":o("Cloudflare-Workers")?"CLOUDFLARE":o("Deno/")?"DENO":o("Node.js/")?"NODE":a.Bun&&"string"==typeof Bun.version?"BUN":a.Deno&&"object"==typeof Deno.version?"DENO":"process"===i(a.process)?"NODE":a.window&&a.document?"BROWSER":"REST"}()},16573:function(t,e,r){var a=r(43724),n=r(62106),i=r(3238),o=ArrayBuffer.prototype;a&&!("detached"in o)&&n(o,"detached",{configurable:!0,get:function(){return i(this)}})},18727:function(t,e,r){var a=r(36955);t.exports=function(t){var e=a(t);return"BigInt64Array"===e||"BigUint64Array"===e}},35370:function(t,e,r){var a=r(26198);t.exports=function(t,e,r){var n=0,i=arguments.length>2?r:a(e),o=new t(i);while(i>n)o[n]=e[n++];return o}},37467:function(t,e,r){var a=r(37628),n=r(94644),i=n.aTypedArray,o=n.exportTypedArrayMethod,s=n.getTypedArrayConstructor;o("toReversed",(function(){return a(i(this),s(this))}))},37628:function(t,e,r){var a=r(26198);t.exports=function(t,e){for(var r=a(t),n=new e(r),i=0;i<r;i++)n[i]=t[r-i-1];return n}},38574:function(t,e,r){var a=r(6596);t.exports="NODE"===a},39928:function(t,e,r){var a=r(26198),n=r(91291),i=RangeError;t.exports=function(t,e,r,o){var s=a(t),l=n(r),c=l<0?s+l:l;if(c>=s||c<0)throw new i("Incorrect index");for(var u=new e(s),f=0;f<s;f++)u[f]=f===c?o:t[f];return u}},44732:function(t,e,r){var a=r(94644),n=r(79504),i=r(79306),o=r(35370),s=a.aTypedArray,l=a.getTypedArrayConstructor,c=a.exportTypedArrayMethod,u=n(a.TypedArrayPrototype.sort);c("toSorted",(function(t){void 0!==t&&i(t);var e=s(this),r=o(l(e),e);return u(r,t)}))},55169:function(t,e,r){var a=r(3238),n=TypeError;t.exports=function(t){if(a(t))throw new n("ArrayBuffer is detached");return t}},57696:function(t,e,r){var a=r(91291),n=r(18014),i=RangeError;t.exports=function(t){if(void 0===t)return 0;var e=a(t),r=n(e);if(e!==r)throw new i("Wrong length or index");return r}},67394:function(t,e,r){var a=r(44576),n=r(46706),i=r(22195),o=a.ArrayBuffer,s=a.TypeError;t.exports=o&&n(o.prototype,"byteLength","get")||function(t){if("ArrayBuffer"!==i(t))throw new s("ArrayBuffer expected");return t.byteLength}},75854:function(t,e,r){var a=r(72777),n=TypeError;t.exports=function(t){var e=a(t,"number");if("number"==typeof e)throw new n("Can't convert number to bigint");return BigInt(e)}},77811:function(t){t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},77936:function(t,e,r){var a=r(46518),n=r(95636);n&&a({target:"ArrayBuffer",proto:!0},{transferToFixedLength:function(){return n(this,arguments.length?arguments[0]:void 0,!1)}})},78100:function(t,e,r){var a=r(46518),n=r(95636);n&&a({target:"ArrayBuffer",proto:!0},{transfer:function(){return n(this,arguments.length?arguments[0]:void 0,!0)}})},79577:function(t,e,r){var a=r(39928),n=r(94644),i=r(18727),o=r(91291),s=r(75854),l=n.aTypedArray,c=n.getTypedArrayConstructor,u=n.exportTypedArrayMethod,f=!!function(){try{new Int8Array(1)["with"](2,{valueOf:function(){throw 8}})}catch(t){return 8===t}}();u("with",{with:function(t,e){var r=l(this),n=o(t),u=i(r)?s(e):+e;return a(r,c(r),n,u)}}["with"],!f)},89429:function(t,e,r){var a=r(44576),n=r(38574);t.exports=function(t){if(n){try{return a.process.getBuiltinModule(t)}catch(e){}try{return Function('return require("'+t+'")')()}catch(e){}}}},94483:function(t,e,r){var a,n,i,o,s=r(44576),l=r(89429),c=r(1548),u=s.structuredClone,f=s.ArrayBuffer,d=s.MessageChannel,v=!1;if(c)v=function(t){u(t,{transfer:[t]})};else if(f)try{d||(a=l("worker_threads"),a&&(d=a.MessageChannel)),d&&(n=new d,i=new f(2),o=function(t){n.port1.postMessage(null,[t])},2===i.byteLength&&(o(i),0===i.byteLength&&(v=o)))}catch(y){}t.exports=v},94644:function(t,e,r){var a,n,i,o=r(77811),s=r(43724),l=r(44576),c=r(94901),u=r(20034),f=r(39297),d=r(36955),v=r(16823),y=r(66699),p=r(36840),h=r(62106),m=r(1625),g=r(42787),w=r(52967),b=r(78227),x=r(33392),A=r(91181),k=A.enforce,C=A.get,O=l.Int8Array,_=O&&O.prototype,B=l.Uint8ClampedArray,j=B&&B.prototype,T=O&&g(O),E=_&&g(_),I=Object.prototype,R=l.TypeError,U=b("toStringTag"),F=x("TYPED_ARRAY_TAG"),L="TypedArrayConstructor",S=o&&!!w&&"Opera"!==d(l.opera),D=!1,W={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},M={BigInt64Array:8,BigUint64Array:8},N=function(t){if(!u(t))return!1;var e=d(t);return"DataView"===e||f(W,e)||f(M,e)},z=function(t){var e=g(t);if(u(e)){var r=C(e);return r&&f(r,L)?r[L]:z(e)}},$=function(t){if(!u(t))return!1;var e=d(t);return f(W,e)||f(M,e)},H=function(t){if($(t))return t;throw new R("Target is not a typed array")},P=function(t){if(c(t)&&(!w||m(T,t)))return t;throw new R(v(t)+" is not a typed array constructor")},V=function(t,e,r,a){if(s){if(r)for(var n in W){var i=l[n];if(i&&f(i.prototype,t))try{delete i.prototype[t]}catch(o){try{i.prototype[t]=e}catch(c){}}}E[t]&&!r||p(E,t,r?e:S&&_[t]||e,a)}},Y=function(t,e,r){var a,n;if(s){if(w){if(r)for(a in W)if(n=l[a],n&&f(n,t))try{delete n[t]}catch(i){}if(T[t]&&!r)return;try{return p(T,t,r?e:S&&T[t]||e)}catch(i){}}for(a in W)n=l[a],!n||n[t]&&!r||p(n,t,e)}};for(a in W)n=l[a],i=n&&n.prototype,i?k(i)[L]=n:S=!1;for(a in M)n=l[a],i=n&&n.prototype,i&&(k(i)[L]=n);if((!S||!c(T)||T===Function.prototype)&&(T=function(){throw new R("Incorrect invocation")},S))for(a in W)l[a]&&w(l[a],T);if((!S||!E||E===I)&&(E=T.prototype,S))for(a in W)l[a]&&w(l[a].prototype,E);if(S&&g(j)!==E&&w(j,E),s&&!f(E,U))for(a in D=!0,h(E,U,{configurable:!0,get:function(){return u(this)?this[F]:void 0}}),W)l[a]&&y(l[a],F,a);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:S,TYPED_ARRAY_TAG:D&&F,aTypedArray:H,aTypedArrayConstructor:P,exportTypedArrayMethod:V,exportTypedArrayStaticMethod:Y,getTypedArrayConstructor:z,isView:N,isTypedArray:$,TypedArray:T,TypedArrayPrototype:E}},95636:function(t,e,r){var a=r(44576),n=r(79504),i=r(46706),o=r(57696),s=r(55169),l=r(67394),c=r(94483),u=r(1548),f=a.structuredClone,d=a.ArrayBuffer,v=a.DataView,y=Math.min,p=d.prototype,h=v.prototype,m=n(p.slice),g=i(p,"resizable","get"),w=i(p,"maxByteLength","get"),b=n(h.getInt8),x=n(h.setInt8);t.exports=(u||c)&&function(t,e,r){var a,n=l(t),i=void 0===e?n:o(e),p=!g||!g(t);if(s(t),u&&(t=f(t,{transfer:[t]}),n===i&&(r||p)))return t;if(n>=i&&(!r||p))a=m(t,0,i);else{var h=r&&!p&&w?{maxByteLength:w(t)}:void 0;a=new d(i,h);for(var A=new v(t),k=new v(a),C=y(i,n),O=0;O<C;O++)x(k,O,b(A,O))}return u||c(t),a}}}]);
//# sourceMappingURL=255.f2fc84d1.js.map